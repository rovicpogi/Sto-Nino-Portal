/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/attendance-live/route";
exports.ids = ["app/api/admin/attendance-live/route"];
exports.modules = {

/***/ "(rsc)/./app/api/admin/attendance-live/route.ts":
/*!************************************************!*\
  !*** ./app/api/admin/attendance-live/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseAdmin */ \"(rsc)/./lib/supabaseAdmin.ts\");\n\n\n// Timeout mode tracker: stores expiration timestamp for timeout mode\n// Format: Map<timestamp, expirationTime>\nconst timeoutModeExpiry = new Map();\n// Clean up expired timeout modes (called on each request instead of setInterval)\n// This avoids issues with setInterval in Next.js serverless functions\nfunction cleanupExpiredTimeouts() {\n    const now = Date.now();\n    for (const [timestamp, expiry] of timeoutModeExpiry.entries()){\n        if (now > expiry) {\n            timeoutModeExpiry.delete(timestamp);\n        }\n    }\n}\n// Check if timeout mode is currently active\nfunction isTimeoutModeActive() {\n    cleanupExpiredTimeouts() // Clean up before checking\n    ;\n    const now = Date.now();\n    for (const expiry of timeoutModeExpiry.values()){\n        if (now < expiry) {\n            return true;\n        }\n    }\n    return false;\n}\n// Enable CORS for ESP32 requests\nasync function OPTIONS(request) {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, POST, PUT, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type'\n        }\n    });\n}\nasync function GET(request) {\n    // Set default headers for all responses\n    const defaultHeaders = {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n    };\n    // Wrap everything in try-catch to ensure we always return JSON\n    try {\n        // Debug: Log request info for localhost debugging\n        const url = new URL(request.url);\n        console.log(\"=== GET REQUEST DEBUG ===\");\n        console.log(\"Request URL:\", url.toString());\n        console.log(\"Origin:\", request.headers.get('origin') || 'N/A');\n        console.log(\"Host:\", request.headers.get('host') || 'N/A');\n        console.log(\"Environment:\", \"development\");\n        console.log(\"=========================\");\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get('limit') || '50');\n        const since = searchParams.get('since') // Optional: get records since this timestamp\n        ;\n        // Use admin client to avoid RLS UUID/TEXT comparison errors\n        let supabaseClient;\n        try {\n            supabaseClient = (0,_lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdmin)();\n        } catch (clientError) {\n            console.error('Failed to get Supabase admin client:', clientError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Database client initialization failed',\n                error:  true ? clientError?.message : 0\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        if (!supabaseClient) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Database client not available'\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        // Fetch recent attendance records\n        // Don't use join to avoid foreign key issues - fetch students separately\n        let data = [];\n        let error = null;\n        try {\n            console.log('Attempting to fetch attendance records...');\n            console.log('Limit:', limit);\n            console.log('Since:', since);\n            // Try multiple methods to fetch records, handling PGRST200 errors gracefully\n            let querySuccess = false;\n            // Method 1: Try RPC function (bypasses PostgREST completely)\n            try {\n                console.log('Method 1: Trying RPC function...');\n                const { data: rpcData, error: rpcError } = await supabaseClient.rpc('get_attendance_records', {\n                    record_limit: limit,\n                    since_time: since || null\n                });\n                if (!rpcError && rpcData) {\n                    data = rpcData;\n                    error = null;\n                    querySuccess = true;\n                    console.log('‚úì RPC query successful, records:', (data || []).length);\n                } else {\n                    console.log('‚úó RPC failed:', rpcError?.message || 'RPC function not found');\n                }\n            } catch (rpcException) {\n                console.log('‚úó RPC exception:', rpcException.message);\n            }\n            // Method 2: If RPC failed, try direct query with explicit columns (no joins)\n            if (!querySuccess) {\n                try {\n                    console.log('Method 2: Trying direct query with explicit columns...');\n                    let directQuery = supabaseClient.from('attendance_records').select('id, scan_time, scan_type, student_id, rfid_card, rfid_tag, status, time_in, time_out, created_at, device_id').order('scan_time', {\n                        ascending: false\n                    }).limit(limit);\n                    if (since) {\n                        directQuery = directQuery.gt('scan_time', since);\n                    }\n                    const directResult = await directQuery;\n                    if (!directResult.error && directResult.data) {\n                        data = directResult.data || [];\n                        error = null;\n                        querySuccess = true;\n                        console.log('‚úì Direct query (minimal) successful, records:', (data || []).length);\n                    } else {\n                        // Check if it's a PGRST200 error - if so, just return empty\n                        if (directResult.error?.code === 'PGRST200' || directResult.error?.message?.includes('relationship') || directResult.error?.message?.includes('Could not find a relationship')) {\n                            console.log('‚ö† PostgREST relationship error - returning empty records (this is OK)');\n                            data = [];\n                            error = null;\n                            querySuccess = true // Treat as success with empty data\n                            ;\n                        } else {\n                            throw directResult.error;\n                        }\n                    }\n                } catch (directError) {\n                    // If it's a relationship error, return empty records\n                    if (directError.code === 'PGRST200' || directError.message?.includes('relationship') || directError.message?.includes('Could not find a relationship')) {\n                        console.log('‚ö† PostgREST relationship error in catch - returning empty records');\n                        data = [];\n                        error = null;\n                        querySuccess = true;\n                    } else {\n                        console.error('‚úó Direct query failed:', directError);\n                        // Return empty records anyway\n                        data = [];\n                        error = null;\n                        querySuccess = true;\n                    }\n                }\n            }\n            // If we still don't have success, return empty records\n            if (!querySuccess) {\n                console.log('‚ö† All query methods failed - returning empty records');\n                data = [];\n                error = null;\n            }\n        } catch (queryError) {\n            console.error('Query execution exception:', queryError);\n            console.error('Exception name:', queryError.name);\n            console.error('Exception message:', queryError.message);\n            console.error('Exception stack:', queryError.stack);\n            error = queryError;\n        }\n        if (error) {\n            console.error('Database error:', error);\n            console.error('Error code:', error.code);\n            console.error('Error message:', error.message);\n            console.error('Error details:', error.details);\n            console.error('Error hint:', error.hint);\n            // Return empty records instead of failing completely\n            // This allows the frontend to still work even if there's a database issue\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Unable to fetch attendance records from database',\n                error:  true ? error.message : 0,\n                details:  true ? {\n                    code: error.code,\n                    message: error.message,\n                    details: error.details,\n                    hint: error.hint\n                } : 0\n            }, {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Fetch student and teacher information for all records\n        const studentIds = [\n            ...new Set((data || []).map((r)=>r.student_id).filter(Boolean))\n        ];\n        const studentMap = {};\n        const teacherMap = {};\n        if (studentIds.length > 0) {\n            try {\n                // Fetch all students\n                const { data: allStudents, error: studentsError } = await supabaseClient.from('students').select('*').limit(1000);\n                if (!studentsError && allStudents) {\n                    allStudents.forEach((student)=>{\n                        const studentIdStr = (student.student_id || '').toString().trim();\n                        const studentNumberStr = (student.student_number || '').toString().trim();\n                        const studentIdUuid = (student.id || '').toString().trim();\n                        if (studentIdStr) studentMap[studentIdStr] = student;\n                        if (studentNumberStr) studentMap[studentNumberStr] = student;\n                        if (studentIdUuid) studentMap[studentIdUuid] = student;\n                    });\n                }\n                // Also fetch teachers\n                const { data: allTeachers, error: teachersError } = await supabaseClient.from('teachers').select('*').limit(1000);\n                if (!teachersError && allTeachers) {\n                    allTeachers.forEach((teacher)=>{\n                        const teacherIdStr = (teacher.teacher_id || teacher.id || '').toString().trim();\n                        const teacherEmail = (teacher.email || '').toString().trim().toLowerCase();\n                        if (teacherIdStr) teacherMap[teacherIdStr] = teacher;\n                        if (teacherEmail) teacherMap[teacherEmail] = teacher;\n                    });\n                }\n            } catch (fetchError) {\n                console.error('Error fetching students/teachers:', fetchError);\n            // Continue without info\n            }\n        }\n        // If we have no data, return empty array\n        if (!data || !Array.isArray(data) || data.length === 0) {\n            console.log('üì≠ No attendance records found in database');\n            console.log('üí° This could mean:');\n            console.log('   1. No scans have been recorded yet');\n            console.log('   2. Database table is empty');\n            console.log('   3. ESP32 scans are not being saved (check POST endpoint logs)');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                message: 'No attendance records found. Scans will appear here once recorded.'\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        console.log(`‚úÖ Found ${(data || []).length} attendance records`);\n        if ((data || []).length > 0) {\n            console.log('üìÖ Sample record times:', data.slice(0, 3).map((r)=>({\n                    scan_time: r.scan_time,\n                    created_at: r.created_at,\n                    id: r.id\n                })));\n        }\n        // Format the response\n        const formattedRecords = (data || []).map((record)=>{\n            // Determine scan type from database fields\n            let scanType = null;\n            if (record.time_in && record.scan_time === record.time_in) {\n                scanType = 'timein';\n            } else if (record.time_out && record.scan_time === record.time_out) {\n                scanType = 'timeout';\n            } else if (record.scan_type) {\n                scanType = record.scan_type.toLowerCase() === 'time_in' || record.scan_type.toLowerCase() === 'timein' ? 'timein' : record.scan_type.toLowerCase() === 'time_out' || record.scan_type.toLowerCase() === 'timeout' ? 'timeout' : null;\n            } else if (record.type) {\n                scanType = record.type.toLowerCase() === 'time_in' || record.type.toLowerCase() === 'timein' ? 'timein' : record.type.toLowerCase() === 'time_out' || record.type.toLowerCase() === 'timeout' ? 'timeout' : null;\n            }\n            // Get student or teacher info from maps\n            const student = studentMap[record.student_id] || null;\n            const teacher = teacherMap[record.student_id] || null;\n            // Determine if this is a teacher or student\n            const isTeacher = !!teacher || student && (student.role === 'teacher' || student.user_type === 'teacher' || student.teacher_id || !student.student_id && !student.student_number);\n            const person = teacher || student;\n            return {\n                id: record.id,\n                studentId: record.student_id,\n                studentName: person ? `${person.first_name || person.firstName || ''} ${person.last_name || person.lastName || ''}`.trim() || person.name || 'Unknown' : 'Unknown',\n                gradeLevel: isTeacher ? null : person?.grade_level || person?.gradeLevel || 'N/A',\n                section: isTeacher ? null : person?.section || 'N/A',\n                scanTime: record.scan_time || record.created_at,\n                status: record.status || 'Present',\n                rfidCard: record.rfid_card || 'N/A',\n                studentPhoto: person?.photo_url || person?.profile_picture || person?.picture || null,\n                scanType: scanType,\n                timeIn: record.time_in || null,\n                timeOut: record.time_out || null,\n                isTeacher: isTeacher || false,\n                subject: isTeacher ? person?.subject || person?.subjects || person?.subject_taught || 'N/A' : null,\n                role: person?.role || null\n            };\n        });\n        console.log(`üì§ Returning ${(formattedRecords || []).length} formatted records to frontend`);\n        if ((formattedRecords || []).length > 0) {\n            console.log('üìÖ First record scan time:', formattedRecords[0]?.scanTime);\n            console.log('üìÖ Last record scan time:', formattedRecords[formattedRecords.length - 1]?.scanTime);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            records: formattedRecords,\n            count: formattedRecords.length\n        }, {\n            status: 200,\n            headers: defaultHeaders\n        });\n    } catch (error) {\n        console.error('Attendance records API error:', error);\n        console.error('Error stack:', error?.stack);\n        console.error('Error name:', error?.name);\n        console.error('Error message:', error?.message);\n        // Always return JSON, never let Next.js return HTML error page\n        try {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Unable to fetch attendance records',\n                error: error?.message || 'Internal server error',\n                details:  true ? {\n                    stack: error?.stack,\n                    name: error?.name,\n                    message: error?.message\n                } : 0\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        } catch (jsonError) {\n            // Even if JSON creation fails, return a simple text response as JSON\n            console.error('Failed to create JSON response:', jsonError);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                success: true,\n                records: [],\n                warning: 'Service temporarily unavailable'\n            }), {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n    }\n}\nasync function POST(request) {\n    // Set default headers for all responses\n    const postHeaders = {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n    };\n    // Wrap everything in try-catch to ensure we always return JSON (for Vercel)\n    try {\n        // Debug: Log environment variables\n        console.log(\"=== POST: ENVIRONMENT VARIABLES DEBUG ===\");\n        console.log(\"URL:\",  true ? \"SET\" : 0);\n        console.log(\"URL Value:\", \"https://ulntyefamkxkbynrugop.supabase.co\");\n        console.log(\"ANON:\",  true ? \"SET\" : 0);\n        console.log(\"ANON Key (first 20 chars):\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsbnR5ZWZhbWt4a2J5bnJ1Z29wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MjgwNDEsImV4cCI6MjA3NjIwNDA0MX0.TnL8jfBVJD8Z0N5rFl_KFhAku8zxiy2fFvztBDYHaWk\"?.substring(0, 20) || 0);\n        console.log(\"SERVICE:\", process.env.SUPABASE_SERVICE_ROLE_KEY ? \"SET\" : \"MISSING\");\n        console.log(\"SERVICE Key (first 20 chars):\", process.env.SUPABASE_SERVICE_ROLE_KEY?.substring(0, 20) || \"MISSING\");\n        console.log(\"==========================================\");\n        let scanData = null;\n        try {\n            scanData = await request.json();\n        } catch (jsonError) {\n            console.error('Error parsing request JSON:', jsonError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Invalid JSON in request body',\n                message: 'Please ensure the request contains valid JSON'\n            }, {\n                status: 200,\n                headers: postHeaders\n            });\n        }\n        if (!scanData) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Request body is required',\n                message: 'Please include RFID card data in the request'\n            }, {\n                status: 200,\n                headers: postHeaders\n            });\n        }\n        // Validate required fields\n        if (!scanData.studentId && !scanData.rfidCard) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Student ID or RFID Card is required',\n                records: []\n            }, {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Use admin client for inserts to bypass RLS policies\n        // This avoids UUID/TEXT comparison errors in RLS policies\n        const supabaseClient = (0,_lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdmin)();\n        if (!supabaseClient) {\n            console.error('Supabase client not initialized');\n            if (true) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: 'Scan recorded (dev mode - not saved to database)'\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Database service not configured. Please check your environment variables.',\n                records: []\n            }, {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Get current date (start of day) for checking existing records\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        const todayStart = today.toISOString();\n        const todayEnd = new Date(today);\n        todayEnd.setHours(23, 59, 59, 999);\n        const todayEndISO = todayEnd.toISOString();\n        // Find student by RFID card or student ID\n        let studentId = scanData.studentId;\n        if (!studentId && scanData.rfidCard) {\n            // Normalize RFID card - remove spaces, convert to uppercase, remove leading zeros\n            let rfidNormalized = scanData.rfidCard.toString().trim().toUpperCase().replace(/\\s+/g, '');\n            // Also create version without leading zeros for matching\n            const rfidNoLeadingZeros = rfidNormalized.replace(/^0+/, '');\n            console.log(`Searching for student with RFID: ${rfidNormalized} (also trying: ${rfidNoLeadingZeros})`);\n            // Fetch all students and filter in memory to avoid column errors\n            const { data: allStudents, error: fetchError } = await supabaseClient.from('students').select('*').limit(1000);\n            if (fetchError) {\n                console.error('Error fetching students:', fetchError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: `Database error: ${fetchError.message}`,\n                    searchedRfid: rfidNormalized,\n                    records: []\n                }, {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Access-Control-Allow-Origin': '*',\n                        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                        'Access-Control-Allow-Headers': 'Content-Type'\n                    }\n                });\n            }\n            // FIRST check teachers table (prioritize teachers over students if same RFID)\n            // This ensures teacher scans are recorded as teachers, not students\n            console.log(`Checking teachers first for RFID: ${rfidNormalized}`);\n            const { data: allTeachers, error: teachersError } = await supabaseClient.from('teachers').select('*').limit(1000);\n            let matchedTeacher = null;\n            if (!teachersError && allTeachers) {\n                // Filter teachers in memory by RFID (check all possible column names)\n                const teachers = (allTeachers || []).filter((teacher)=>{\n                    const rfid1 = (teacher.rfid_card || '').toString().trim().toUpperCase();\n                    const rfid2 = (teacher.rfidCard || '').toString().trim().toUpperCase();\n                    const rfid3 = (teacher.rfid_tag || '').toString().trim().toUpperCase();\n                    const rfid4 = (teacher.rfidTag || '').toString().trim().toUpperCase();\n                    return rfid1 === rfidNormalized || rfid1 === rfidNoLeadingZeros || rfid2 === rfidNormalized || rfid2 === rfidNoLeadingZeros || rfid3 === rfidNormalized || rfid3 === rfidNoLeadingZeros || rfid4 === rfidNormalized || rfid4 === rfidNoLeadingZeros || rfid1.includes(rfidNormalized) || rfid2.includes(rfidNormalized) || rfid3.includes(rfidNormalized) || rfid4.includes(rfidNormalized);\n                });\n                if (teachers && teachers.length > 0) {\n                    matchedTeacher = teachers[0];\n                    console.log(`‚úÖ Found teacher FIRST: ${matchedTeacher.first_name || matchedTeacher.firstName || 'Unknown'} ${matchedTeacher.last_name || matchedTeacher.lastName || ''}`);\n                    // Use teacher_id or id (TEXT) for attendance_records.student_id\n                    studentId = matchedTeacher.teacher_id || matchedTeacher.id?.toString() || matchedTeacher.email;\n                }\n            }\n            // If no teacher found, check students table\n            if (!matchedTeacher) {\n                console.log(`No teacher found, checking students for RFID: ${rfidNormalized}`);\n                // Filter students in memory by RFID (check all possible column names)\n                // Priority: rfid_card (what ESP32 expects) > rfidCard > rfid_tag > rfidTag\n                const students = (allStudents || []).filter((student)=>{\n                    const rfid1 = (student.rfid_card || '').toString().trim().toUpperCase() // Primary - ESP32 expects this\n                    ;\n                    const rfid2 = (student.rfidCard || '').toString().trim().toUpperCase();\n                    const rfid3 = (student.rfid_tag || '').toString().trim().toUpperCase();\n                    const rfid4 = (student.rfidTag || '').toString().trim().toUpperCase();\n                    // Check exact matches first, then partial\n                    return rfid1 === rfidNormalized || rfid1 === rfidNoLeadingZeros || rfid2 === rfidNormalized || rfid2 === rfidNoLeadingZeros || rfid3 === rfidNormalized || rfid3 === rfidNoLeadingZeros || rfid4 === rfidNormalized || rfid4 === rfidNoLeadingZeros || rfid1.includes(rfidNormalized) || rfid2.includes(rfidNormalized) || rfid3.includes(rfidNormalized) || rfid4.includes(rfidNormalized);\n                });\n                if (!students || students.length === 0) {\n                    // Neither student nor teacher found\n                    console.log(`‚ùå No student or teacher found with RFID: ${rfidNormalized}`);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: `No student or teacher found for RFID: ${rfidNormalized}. Please assign this RFID card in the admin panel.`,\n                        searchedRfid: rfidNormalized,\n                        message: `RFID ${rfidNormalized} not assigned to any student or teacher`\n                    }, {\n                        status: 404,\n                        headers: {\n                            'Access-Control-Allow-Origin': '*',\n                            'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                            'Access-Control-Allow-Headers': 'Content-Type'\n                        }\n                    });\n                } else {\n                    // Found a student\n                    const matchedStudent = students[0];\n                    console.log(`Found student: ${matchedStudent.first_name || matchedStudent.firstName || 'Unknown'} ${matchedStudent.last_name || matchedStudent.lastName || ''}`);\n                    // Use student_number or student_id (TEXT) - NOT the UUID id\n                    // attendance_records.student_id is TEXT type, so we store TEXT values\n                    studentId = matchedStudent.student_number || matchedStudent.student_id || matchedStudent.studentId || matchedStudent.id?.toString();\n                }\n            }\n        }\n        // Check if student has already scanned in today\n        // student_id is now TEXT type, so we can query directly\n        // But we need to cast to text to avoid UUID comparison errors\n        let todayRecords = [];\n        let checkError = null;\n        // Fetch all records for today, then filter in memory to avoid type mismatch\n        const { data: allTodayRecords, error: fetchError } = await supabaseClient.from('attendance_records').select('id, scan_type, scan_time, time_in, time_out, student_id').gte('scan_time', todayStart).lte('scan_time', todayEndISO).order('scan_time', {\n            ascending: true\n        });\n        if (fetchError) {\n            checkError = fetchError;\n            console.error('Error fetching today records:', fetchError);\n        } else if (allTodayRecords) {\n            // Filter in memory by student_id (text match) to avoid UUID/TEXT comparison issues\n            todayRecords = allTodayRecords.filter((r)=>{\n                const rId = (r.student_id || '').toString().trim();\n                const sId = (studentId || '').toString().trim();\n                return rId === sId || rId === studentId || sId === r.student_id;\n            });\n        }\n        if (checkError) {\n            console.error('Error checking existing records:', checkError);\n        }\n        // Determine scan type\n        // ALWAYS record as \"timein\" by default, unless timeout mode is active\n        const currentTime = new Date().toISOString();\n        let scanType = 'timein';\n        let timeIn = null;\n        let timeOut = null;\n        // Check if timeout mode is active (button was clicked in display page)\n        const timeoutModeActive = isTimeoutModeActive();\n        if (timeoutModeActive) {\n            // Timeout mode is active - record as timeout\n            scanType = 'timeout';\n            timeOut = currentTime;\n            // Find the most recent time in record for this student today\n            if (todayRecords && todayRecords.length > 0) {\n                const timeInRecord = todayRecords.filter((r)=>r.scan_type === 'timein' || r.scan_type === 'time_in').sort((a, b)=>new Date(b.scan_time).getTime() - new Date(a.scan_time).getTime())[0];\n                if (timeInRecord) {\n                    timeIn = timeInRecord.time_in || timeInRecord.scan_time;\n                }\n            }\n            console.log('‚è∞ Timeout mode active - recording as timeout');\n        } else {\n            // Always record as time in (default behavior)\n            scanType = 'timein';\n            timeIn = currentTime;\n            console.log('‚úÖ Recording as time in (default)');\n        }\n        // Insert the attendance record\n        // Build insert object with all required fields\n        const attendanceRecord = {\n            student_id: studentId\n        };\n        // Add RFID fields - set both rfid_card and rfid_tag to avoid NOT NULL constraint errors\n        const rfidValue = scanData.rfidCard || '';\n        if (rfidValue) {\n            attendanceRecord.rfid_card = rfidValue;\n            attendanceRecord.rfid_tag = rfidValue // Some schemas use rfid_tag instead\n            ;\n        } else {\n            // If no RFID provided, set empty string to avoid NOT NULL constraint\n            attendanceRecord.rfid_card = '';\n            attendanceRecord.rfid_tag = '';\n        }\n        // Set device_id - if column is UUID type, we can't use text, so set to null\n        // If column is TEXT type, we can use a device identifier\n        // For now, don't set it to avoid UUID type errors\n        // attendanceRecord.device_id = scanData.deviceId || null\n        attendanceRecord.scan_time = currentTime;\n        attendanceRecord.scan_type = scanType;\n        attendanceRecord.time_in = timeIn;\n        attendanceRecord.time_out = timeOut;\n        attendanceRecord.status = scanType === 'timein' ? 'Present' : 'Present';\n        attendanceRecord.created_at = currentTime;\n        // Optional type field for compatibility\n        attendanceRecord.type = scanType;\n        // Insert the attendance record (without join to avoid foreign key issues)\n        console.log('üíæ Inserting attendance record:', {\n            student_id: attendanceRecord.student_id,\n            rfid_card: attendanceRecord.rfid_card,\n            scan_type: attendanceRecord.scan_type,\n            scan_time: attendanceRecord.scan_time\n        });\n        const { data: newRecord, error: insertError } = await supabaseClient.from('attendance_records').insert([\n            attendanceRecord\n        ]).select('*').single();\n        if (insertError) {\n            console.error('‚ùå Insert failed:', insertError);\n            console.error('Database error:', insertError);\n            // In development, return success even if table doesn't exist\n            if (true) {\n                console.log('Scan data (dev mode):', {\n                    studentId,\n                    scanType,\n                    timeIn,\n                    timeOut\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: 'Scan recorded (dev mode - not saved to database)',\n                    scanType,\n                    timeIn,\n                    timeOut\n                }, {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*',\n                        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                        'Access-Control-Allow-Headers': 'Content-Type'\n                    }\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: insertError.message,\n                hint: 'Please check that all required columns exist in attendance_records table. Run create-attendance-table.sql in Supabase.',\n                records: []\n            }, {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Fetch student or teacher information separately to avoid join issues\n        // Fetch all students and filter in memory to avoid UUID/TEXT comparison errors\n        let personInfo = null;\n        let isTeacher = false;\n        if (studentId) {\n            // First, try to find in students table\n            const { data: allStudents } = await supabaseClient.from('students').select('*').limit(1000);\n            if (allStudents) {\n                // Find matching student by comparing as strings\n                const studentIdStr = (studentId || '').toString().trim();\n                personInfo = allStudents.find((student)=>{\n                    const sId = (student.student_id || '').toString().trim();\n                    const sNum = (student.student_number || '').toString().trim();\n                    const sUuid = (student.id || '').toString().trim();\n                    return sId === studentIdStr || sNum === studentIdStr || sUuid === studentIdStr;\n                }) || null;\n            }\n            // If not found in students, try teachers table\n            if (!personInfo) {\n                const { data: allTeachers } = await supabaseClient.from('teachers').select('*').limit(1000);\n                if (allTeachers) {\n                    const personIdStr = (studentId || '').toString().trim();\n                    personInfo = allTeachers.find((teacher)=>{\n                        const tId = (teacher.teacher_id || '').toString().trim();\n                        const tUuid = (teacher.id || '').toString().trim();\n                        const tEmail = (teacher.email || '').toString().trim().toLowerCase();\n                        return tId === personIdStr || tUuid === personIdStr || tEmail === personIdStr;\n                    }) || null;\n                    if (personInfo) {\n                        isTeacher = true;\n                    }\n                }\n            }\n        }\n        // Format the response\n        const formattedRecord = {\n            id: newRecord.id,\n            studentId: newRecord.student_id || studentId,\n            studentName: personInfo ? `${personInfo.first_name || personInfo.firstName || ''} ${personInfo.last_name || personInfo.lastName || ''}`.trim() || personInfo.name || 'Unknown' : 'Unknown',\n            gradeLevel: isTeacher ? null : personInfo?.grade_level || personInfo?.gradeLevel || 'N/A',\n            section: isTeacher ? null : personInfo?.section || 'N/A',\n            scanTime: newRecord.scan_time || newRecord.created_at,\n            status: newRecord.status || 'Present',\n            rfidCard: newRecord.rfid_card || scanData.rfidCard || 'N/A',\n            studentPhoto: personInfo?.photo_url || personInfo?.profile_picture || personInfo?.picture || null,\n            scanType: scanType,\n            timeIn: newRecord.time_in || null,\n            timeOut: newRecord.time_out || null,\n            isTeacher: isTeacher,\n            subject: isTeacher ? personInfo?.subject || personInfo?.subjects || personInfo?.subject_taught || 'N/A' : null\n        };\n        console.log('‚úÖ Scan saved successfully!', {\n            id: newRecord.id,\n            student: formattedRecord.studentName,\n            scanType: scanType,\n            scanTime: formattedRecord.scanTime\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            record: formattedRecord,\n            message: `Time ${scanType === 'timein' ? 'In' : 'Out'} recorded successfully`\n        }, {\n            status: 200,\n            headers: postHeaders\n        });\n    } catch (error) {\n        // Catch any unhandled errors that might cause 500 HTML response (for Vercel)\n        console.error('CRITICAL: Unhandled error in POST handler:', error);\n        console.error('Error stack:', error?.stack);\n        console.error('Error name:', error?.name);\n        console.error('Error message:', error?.message);\n        // Always return JSON, never HTML (works for both localhost and Vercel)\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error:  true ? error?.message : 0,\n            records: [],\n            warning: 'Service error occurred'\n        }, {\n            status: 200,\n            headers: postHeaders\n        });\n    }\n}\n// PUT endpoint to enable timeout mode for 5 seconds\nasync function PUT(request) {\n    const putHeaders = {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n    };\n    try {\n        const body = await request.json();\n        const { action } = body;\n        if (action === 'enable-timeout') {\n            // Enable timeout mode for 5 seconds\n            const now = Date.now();\n            const expiry = now + 5000 // 5 seconds from now\n            ;\n            const timestamp = now;\n            timeoutModeExpiry.set(timestamp, expiry);\n            console.log('‚è∞ Timeout mode enabled for 5 seconds');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: 'Timeout mode enabled for 5 seconds',\n                expiresAt: expiry\n            }, {\n                status: 200,\n                headers: putHeaders\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Invalid action'\n            }, {\n                status: 400,\n                headers: putHeaders\n            });\n        }\n    } catch (error) {\n        console.error('Error in PUT handler:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error?.message || 'Internal server error'\n        }, {\n            status: 200,\n            headers: putHeaders\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFFWTtBQUV0RCxxRUFBcUU7QUFDckUseUNBQXlDO0FBQ3pDLE1BQU1FLG9CQUFvQixJQUFJQztBQUU5QixpRkFBaUY7QUFDakYsc0VBQXNFO0FBQ3RFLFNBQVNDO0lBQ1AsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixLQUFLLE1BQU0sQ0FBQ0UsV0FBV0MsT0FBTyxJQUFJTixrQkFBa0JPLE9BQU8sR0FBSTtRQUM3RCxJQUFJSixNQUFNRyxRQUFRO1lBQ2hCTixrQkFBa0JRLE1BQU0sQ0FBQ0g7UUFDM0I7SUFDRjtBQUNGO0FBRUEsNENBQTRDO0FBQzVDLFNBQVNJO0lBQ1BQLHlCQUF5QiwyQkFBMkI7O0lBQ3BELE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsS0FBSyxNQUFNRyxVQUFVTixrQkFBa0JVLE1BQU0sR0FBSTtRQUMvQyxJQUFJUCxNQUFNRyxRQUFRO1lBQ2hCLE9BQU87UUFDVDtJQUNGO0lBQ0EsT0FBTztBQUNUO0FBRUEsaUNBQWlDO0FBQzFCLGVBQWVLLFFBQVFDLE9BQWdCO0lBQzVDLE9BQU8sSUFBSWQscURBQVlBLENBQUMsTUFBTTtRQUM1QmUsUUFBUTtRQUNSQyxTQUFTO1lBQ1AsK0JBQStCO1lBQy9CLGdDQUFnQztZQUNoQyxnQ0FBZ0M7UUFDbEM7SUFDRjtBQUNGO0FBRU8sZUFBZUMsSUFBSUgsT0FBZ0I7SUFDeEMsd0NBQXdDO0lBQ3hDLE1BQU1JLGlCQUFpQjtRQUNyQixnQkFBZ0I7UUFDaEIsK0JBQStCO1FBQy9CLGdDQUFnQztRQUNoQyxnQ0FBZ0M7SUFDbEM7SUFFQSwrREFBK0Q7SUFDL0QsSUFBSTtRQUNGLGtEQUFrRDtRQUNsRCxNQUFNQyxNQUFNLElBQUlDLElBQUlOLFFBQVFLLEdBQUc7UUFDL0JFLFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUMsZ0JBQWdC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UUFFSixPQUFPO1lBQ0wsT0FBTy9MLHFEQUFZQSxDQUFDZ0MsSUFBSSxDQUN0QjtnQkFDRUMsU0FBUztnQkFDVEYsT0FBTztZQUNULEdBQ0E7Z0JBQ0VoQixRQUFRO2dCQUNSQyxTQUFTK0s7WUFDWDtRQUVKO0lBQ0YsRUFBRSxPQUFPaEssT0FBWTtRQUNuQlYsUUFBUVUsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBTy9CLHFEQUFZQSxDQUFDZ0MsSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RGLE9BQU9BLE9BQU9NLFdBQVc7UUFDM0IsR0FDQTtZQUNFdEIsUUFBUTtZQUNSQyxTQUFTK0s7UUFDWDtJQUVKO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFx4YW1wcFxcaHRkb2NzXFxjYXBzdG9uZV9NYWluXFxhcHBcXGFwaVxcYWRtaW5cXGF0dGVuZGFuY2UtbGl2ZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9saWIvc3VwYWJhc2VDbGllbnQnXHJcbmltcG9ydCB7IGdldFN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZUFkbWluJ1xyXG5cclxuLy8gVGltZW91dCBtb2RlIHRyYWNrZXI6IHN0b3JlcyBleHBpcmF0aW9uIHRpbWVzdGFtcCBmb3IgdGltZW91dCBtb2RlXHJcbi8vIEZvcm1hdDogTWFwPHRpbWVzdGFtcCwgZXhwaXJhdGlvblRpbWU+XHJcbmNvbnN0IHRpbWVvdXRNb2RlRXhwaXJ5ID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKVxyXG5cclxuLy8gQ2xlYW4gdXAgZXhwaXJlZCB0aW1lb3V0IG1vZGVzIChjYWxsZWQgb24gZWFjaCByZXF1ZXN0IGluc3RlYWQgb2Ygc2V0SW50ZXJ2YWwpXHJcbi8vIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIHNldEludGVydmFsIGluIE5leHQuanMgc2VydmVybGVzcyBmdW5jdGlvbnNcclxuZnVuY3Rpb24gY2xlYW51cEV4cGlyZWRUaW1lb3V0cygpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpXHJcbiAgZm9yIChjb25zdCBbdGltZXN0YW1wLCBleHBpcnldIG9mIHRpbWVvdXRNb2RlRXhwaXJ5LmVudHJpZXMoKSkge1xyXG4gICAgaWYgKG5vdyA+IGV4cGlyeSkge1xyXG4gICAgICB0aW1lb3V0TW9kZUV4cGlyeS5kZWxldGUodGltZXN0YW1wKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gQ2hlY2sgaWYgdGltZW91dCBtb2RlIGlzIGN1cnJlbnRseSBhY3RpdmVcclxuZnVuY3Rpb24gaXNUaW1lb3V0TW9kZUFjdGl2ZSgpOiBib29sZWFuIHtcclxuICBjbGVhbnVwRXhwaXJlZFRpbWVvdXRzKCkgLy8gQ2xlYW4gdXAgYmVmb3JlIGNoZWNraW5nXHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxyXG4gIGZvciAoY29uc3QgZXhwaXJ5IG9mIHRpbWVvdXRNb2RlRXhwaXJ5LnZhbHVlcygpKSB7XHJcbiAgICBpZiAobm93IDwgZXhwaXJ5KSB7XHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZVxyXG59XHJcblxyXG4vLyBFbmFibGUgQ09SUyBmb3IgRVNQMzIgcmVxdWVzdHNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcclxuICAgIHN0YXR1czogMjAwLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIFBVVCwgT1BUSU9OUycsXHJcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICB9LFxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIC8vIFNldCBkZWZhdWx0IGhlYWRlcnMgZm9yIGFsbCByZXNwb25zZXNcclxuICBjb25zdCBkZWZhdWx0SGVhZGVycyA9IHtcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgfVxyXG5cclxuICAvLyBXcmFwIGV2ZXJ5dGhpbmcgaW4gdHJ5LWNhdGNoIHRvIGVuc3VyZSB3ZSBhbHdheXMgcmV0dXJuIEpTT05cclxuICB0cnkge1xyXG4gICAgLy8gRGVidWc6IExvZyByZXF1ZXN0IGluZm8gZm9yIGxvY2FsaG9zdCBkZWJ1Z2dpbmdcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zb2xlLmxvZyhcIj09PSBHRVQgUkVRVUVTVCBERUJVRyA9PT1cIilcclxuICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdCBVUkw6XCIsIHVybC50b1N0cmluZygpKVxyXG4gICAgY29uc29sZS5sb2coXCJPcmlnaW46XCIsIHJlcXVlc3QuaGVhZGVycy5nZXQoJ29yaWdpbicpIHx8ICdOL0EnKVxyXG4gICAgY29uc29sZS5sb2coXCJIb3N0OlwiLCByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdob3N0JykgfHwgJ04vQScpXHJcbiAgICBjb25zb2xlLmxvZyhcIkVudmlyb25tZW50OlwiLCBwcm9jZXNzLmVudi5OT0RFX0VOVilcclxuICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PVwiKVxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzUwJylcclxuICAgIGNvbnN0IHNpbmNlID0gc2VhcmNoUGFyYW1zLmdldCgnc2luY2UnKSAvLyBPcHRpb25hbDogZ2V0IHJlY29yZHMgc2luY2UgdGhpcyB0aW1lc3RhbXBcclxuXHJcbiAgICAvLyBVc2UgYWRtaW4gY2xpZW50IHRvIGF2b2lkIFJMUyBVVUlEL1RFWFQgY29tcGFyaXNvbiBlcnJvcnNcclxuICAgIGxldCBzdXBhYmFzZUNsaWVudFxyXG4gICAgdHJ5IHtcclxuICAgICAgc3VwYWJhc2VDbGllbnQgPSBnZXRTdXBhYmFzZUFkbWluKClcclxuICAgIH0gY2F0Y2ggKGNsaWVudEVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBTdXBhYmFzZSBhZG1pbiBjbGllbnQ6JywgY2xpZW50RXJyb3IpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgLy8gUmV0dXJuIHN1Y2Nlc3Mgd2l0aCBlbXB0eSByZWNvcmRzXHJcbiAgICAgICAgcmVjb3JkczogW10sXHJcbiAgICAgICAgd2FybmluZzogJ0RhdGFiYXNlIGNsaWVudCBpbml0aWFsaXphdGlvbiBmYWlsZWQnLFxyXG4gICAgICAgIGVycm9yOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGNsaWVudEVycm9yPy5tZXNzYWdlIDogdW5kZWZpbmVkLFxyXG4gICAgICB9LCB7IFxyXG4gICAgICAgIHN0YXR1czogMjAwLCAvLyBBbHdheXMgcmV0dXJuIDIwMCwgbmV2ZXIgNTAwXHJcbiAgICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMsXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzdXBhYmFzZUNsaWVudCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIC8vIFJldHVybiBzdWNjZXNzIHdpdGggZW1wdHkgcmVjb3Jkc1xyXG4gICAgICAgIHJlY29yZHM6IFtdLFxyXG4gICAgICAgIHdhcm5pbmc6ICdEYXRhYmFzZSBjbGllbnQgbm90IGF2YWlsYWJsZScsXHJcbiAgICAgIH0sIHsgXHJcbiAgICAgICAgc3RhdHVzOiAyMDAsIC8vIEFsd2F5cyByZXR1cm4gMjAwLCBuZXZlciA1MDBcclxuICAgICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyxcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCByZWNlbnQgYXR0ZW5kYW5jZSByZWNvcmRzXHJcbiAgICAvLyBEb24ndCB1c2Ugam9pbiB0byBhdm9pZCBmb3JlaWduIGtleSBpc3N1ZXMgLSBmZXRjaCBzdHVkZW50cyBzZXBhcmF0ZWx5XHJcbiAgICBsZXQgZGF0YTogYW55W10gPSBbXVxyXG4gICAgbGV0IGVycm9yOiBhbnkgPSBudWxsXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGZldGNoIGF0dGVuZGFuY2UgcmVjb3Jkcy4uLicpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdMaW1pdDonLCBsaW1pdClcclxuICAgICAgY29uc29sZS5sb2coJ1NpbmNlOicsIHNpbmNlKVxyXG4gICAgICBcclxuICAgICAgLy8gVHJ5IG11bHRpcGxlIG1ldGhvZHMgdG8gZmV0Y2ggcmVjb3JkcywgaGFuZGxpbmcgUEdSU1QyMDAgZXJyb3JzIGdyYWNlZnVsbHlcclxuICAgICAgbGV0IHF1ZXJ5U3VjY2VzcyA9IGZhbHNlXHJcbiAgICAgIFxyXG4gICAgICAvLyBNZXRob2QgMTogVHJ5IFJQQyBmdW5jdGlvbiAoYnlwYXNzZXMgUG9zdGdSRVNUIGNvbXBsZXRlbHkpXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01ldGhvZCAxOiBUcnlpbmcgUlBDIGZ1bmN0aW9uLi4uJylcclxuICAgICAgICBjb25zdCB7IGRhdGE6IHJwY0RhdGEsIGVycm9yOiBycGNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQucnBjKCdnZXRfYXR0ZW5kYW5jZV9yZWNvcmRzJywge1xyXG4gICAgICAgICAgcmVjb3JkX2xpbWl0OiBsaW1pdCxcclxuICAgICAgICAgIHNpbmNlX3RpbWU6IHNpbmNlIHx8IG51bGxcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcnBjRXJyb3IgJiYgcnBjRGF0YSkge1xyXG4gICAgICAgICAgZGF0YSA9IHJwY0RhdGEgYXMgYW55W11cclxuICAgICAgICAgIGVycm9yID0gbnVsbFxyXG4gICAgICAgICAgcXVlcnlTdWNjZXNzID0gdHJ1ZVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KckyBSUEMgcXVlcnkgc3VjY2Vzc2Z1bCwgcmVjb3JkczonLCAoZGF0YSB8fCBbXSkubGVuZ3RoKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyXIFJQQyBmYWlsZWQ6JywgcnBjRXJyb3I/Lm1lc3NhZ2UgfHwgJ1JQQyBmdW5jdGlvbiBub3QgZm91bmQnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAocnBjRXhjZXB0aW9uOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pyXIFJQQyBleGNlcHRpb246JywgcnBjRXhjZXB0aW9uLm1lc3NhZ2UpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIE1ldGhvZCAyOiBJZiBSUEMgZmFpbGVkLCB0cnkgZGlyZWN0IHF1ZXJ5IHdpdGggZXhwbGljaXQgY29sdW1ucyAobm8gam9pbnMpXHJcbiAgICAgIGlmICghcXVlcnlTdWNjZXNzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXRob2QgMjogVHJ5aW5nIGRpcmVjdCBxdWVyeSB3aXRoIGV4cGxpY2l0IGNvbHVtbnMuLi4nKVxyXG4gICAgICAgICAgbGV0IGRpcmVjdFF1ZXJ5ID0gc3VwYWJhc2VDbGllbnRcclxuICAgICAgLmZyb20oJ2F0dGVuZGFuY2VfcmVjb3JkcycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBzY2FuX3RpbWUsIHNjYW5fdHlwZSwgc3R1ZGVudF9pZCwgcmZpZF9jYXJkLCByZmlkX3RhZywgc3RhdHVzLCB0aW1lX2luLCB0aW1lX291dCwgY3JlYXRlZF9hdCwgZGV2aWNlX2lkJylcclxuICAgICAgLm9yZGVyKCdzY2FuX3RpbWUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KGxpbWl0KVxyXG5cclxuICAgIGlmIChzaW5jZSkge1xyXG4gICAgICAgICAgICBkaXJlY3RRdWVyeSA9IGRpcmVjdFF1ZXJ5Lmd0KCdzY2FuX3RpbWUnLCBzaW5jZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgZGlyZWN0UmVzdWx0ID0gYXdhaXQgZGlyZWN0UXVlcnlcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKCFkaXJlY3RSZXN1bHQuZXJyb3IgJiYgZGlyZWN0UmVzdWx0LmRhdGEpIHtcclxuICAgICAgICAgICAgZGF0YSA9IGRpcmVjdFJlc3VsdC5kYXRhIHx8IFtdXHJcbiAgICAgICAgICAgIGVycm9yID0gbnVsbFxyXG4gICAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinJMgRGlyZWN0IHF1ZXJ5IChtaW5pbWFsKSBzdWNjZXNzZnVsLCByZWNvcmRzOicsIChkYXRhIHx8IFtdKS5sZW5ndGgpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgUEdSU1QyMDAgZXJyb3IgLSBpZiBzbywganVzdCByZXR1cm4gZW1wdHlcclxuICAgICAgICAgICAgaWYgKGRpcmVjdFJlc3VsdC5lcnJvcj8uY29kZSA9PT0gJ1BHUlNUMjAwJyB8fCBcclxuICAgICAgICAgICAgICAgIGRpcmVjdFJlc3VsdC5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3JlbGF0aW9uc2hpcCcpIHx8XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RSZXN1bHQuZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdDb3VsZCBub3QgZmluZCBhIHJlbGF0aW9uc2hpcCcpKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoCBQb3N0Z1JFU1QgcmVsYXRpb25zaGlwIGVycm9yIC0gcmV0dXJuaW5nIGVtcHR5IHJlY29yZHMgKHRoaXMgaXMgT0spJylcclxuICAgICAgICAgICAgICBkYXRhID0gW11cclxuICAgICAgICAgICAgICBlcnJvciA9IG51bGxcclxuICAgICAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlIC8vIFRyZWF0IGFzIHN1Y2Nlc3Mgd2l0aCBlbXB0eSBkYXRhXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgZGlyZWN0UmVzdWx0LmVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChkaXJlY3RFcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAvLyBJZiBpdCdzIGEgcmVsYXRpb25zaGlwIGVycm9yLCByZXR1cm4gZW1wdHkgcmVjb3Jkc1xyXG4gICAgICAgICAgaWYgKGRpcmVjdEVycm9yLmNvZGUgPT09ICdQR1JTVDIwMCcgfHwgXHJcbiAgICAgICAgICAgICAgZGlyZWN0RXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JlbGF0aW9uc2hpcCcpIHx8XHJcbiAgICAgICAgICAgICAgZGlyZWN0RXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0NvdWxkIG5vdCBmaW5kIGEgcmVsYXRpb25zaGlwJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoCBQb3N0Z1JFU1QgcmVsYXRpb25zaGlwIGVycm9yIGluIGNhdGNoIC0gcmV0dXJuaW5nIGVtcHR5IHJlY29yZHMnKVxyXG4gICAgICAgICAgICBkYXRhID0gW11cclxuICAgICAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgICAgICAgIHF1ZXJ5U3VjY2VzcyA9IHRydWVcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KclyBEaXJlY3QgcXVlcnkgZmFpbGVkOicsIGRpcmVjdEVycm9yKVxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZW1wdHkgcmVjb3JkcyBhbnl3YXlcclxuICAgICAgICAgICAgZGF0YSA9IFtdXHJcbiAgICAgICAgICAgIGVycm9yID0gbnVsbFxyXG4gICAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiB3ZSBzdGlsbCBkb24ndCBoYXZlIHN1Y2Nlc3MsIHJldHVybiBlbXB0eSByZWNvcmRzXHJcbiAgICAgIGlmICghcXVlcnlTdWNjZXNzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoCBBbGwgcXVlcnkgbWV0aG9kcyBmYWlsZWQgLSByZXR1cm5pbmcgZW1wdHkgcmVjb3JkcycpXHJcbiAgICAgICAgZGF0YSA9IFtdXHJcbiAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKHF1ZXJ5RXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdRdWVyeSBleGVjdXRpb24gZXhjZXB0aW9uOicsIHF1ZXJ5RXJyb3IpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBuYW1lOicsIHF1ZXJ5RXJyb3IubmFtZSlcclxuICAgICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIG1lc3NhZ2U6JywgcXVlcnlFcnJvci5tZXNzYWdlKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gc3RhY2s6JywgcXVlcnlFcnJvci5zdGFjaylcclxuICAgICAgZXJyb3IgPSBxdWVyeUVycm9yXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycm9yKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb2RlOicsIGVycm9yLmNvZGUpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgZXJyb3IubWVzc2FnZSlcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5kZXRhaWxzKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoaW50OicsIGVycm9yLmhpbnQpXHJcbiAgICAgIFxyXG4gICAgICAvLyBSZXR1cm4gZW1wdHkgcmVjb3JkcyBpbnN0ZWFkIG9mIGZhaWxpbmcgY29tcGxldGVseVxyXG4gICAgICAvLyBUaGlzIGFsbG93cyB0aGUgZnJvbnRlbmQgdG8gc3RpbGwgd29yayBldmVuIGlmIHRoZXJlJ3MgYSBkYXRhYmFzZSBpc3N1ZVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIC8vIFJldHVybiBzdWNjZXNzIHdpdGggZW1wdHkgcmVjb3Jkc1xyXG4gICAgICAgIHJlY29yZHM6IFtdLFxyXG4gICAgICAgIHdhcm5pbmc6ICdVbmFibGUgdG8gZmV0Y2ggYXR0ZW5kYW5jZSByZWNvcmRzIGZyb20gZGF0YWJhc2UnLFxyXG4gICAgICAgIGVycm9yOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB7XHJcbiAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXHJcbiAgICAgICAgICBoaW50OiBlcnJvci5oaW50LFxyXG4gICAgICAgIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sIHsgXHJcbiAgICAgICAgc3RhdHVzOiAyMDAsIC8vIFJldHVybiAyMDAgd2l0aCBlbXB0eSByZWNvcmRzIGluc3RlYWQgb2YgNTAwXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIHN0dWRlbnQgYW5kIHRlYWNoZXIgaW5mb3JtYXRpb24gZm9yIGFsbCByZWNvcmRzXHJcbiAgICBjb25zdCBzdHVkZW50SWRzID0gWy4uLm5ldyBTZXQoKGRhdGEgfHwgW10pLm1hcCgocjogYW55KSA9PiByLnN0dWRlbnRfaWQpLmZpbHRlcihCb29sZWFuKSldXHJcbiAgICBjb25zdCBzdHVkZW50TWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cclxuICAgIGNvbnN0IHRlYWNoZXJNYXA6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxyXG4gICAgXHJcbiAgICBpZiAoc3R1ZGVudElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggYWxsIHN0dWRlbnRzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhbGxTdHVkZW50cywgZXJyb3I6IHN0dWRlbnRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgnc3R1ZGVudHMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMTAwMClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXN0dWRlbnRzRXJyb3IgJiYgYWxsU3R1ZGVudHMpIHtcclxuICAgICAgICAgIGFsbFN0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdHVkZW50SWRTdHIgPSAoc3R1ZGVudC5zdHVkZW50X2lkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICBjb25zdCBzdHVkZW50TnVtYmVyU3RyID0gKHN0dWRlbnQuc3R1ZGVudF9udW1iZXIgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRJZFV1aWQgPSAoc3R1ZGVudC5pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChzdHVkZW50SWRTdHIpIHN0dWRlbnRNYXBbc3R1ZGVudElkU3RyXSA9IHN0dWRlbnRcclxuICAgICAgICAgICAgaWYgKHN0dWRlbnROdW1iZXJTdHIpIHN0dWRlbnRNYXBbc3R1ZGVudE51bWJlclN0cl0gPSBzdHVkZW50XHJcbiAgICAgICAgICAgIGlmIChzdHVkZW50SWRVdWlkKSBzdHVkZW50TWFwW3N0dWRlbnRJZFV1aWRdID0gc3R1ZGVudFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWxzbyBmZXRjaCB0ZWFjaGVyc1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWxsVGVhY2hlcnMsIGVycm9yOiB0ZWFjaGVyc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgICAgLmZyb20oJ3RlYWNoZXJzJylcclxuICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgLmxpbWl0KDEwMDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0ZWFjaGVyc0Vycm9yICYmIGFsbFRlYWNoZXJzKSB7XHJcbiAgICAgICAgICBhbGxUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVhY2hlcklkU3RyID0gKHRlYWNoZXIudGVhY2hlcl9pZCB8fCB0ZWFjaGVyLmlkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICBjb25zdCB0ZWFjaGVyRW1haWwgPSAodGVhY2hlci5lbWFpbCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRlYWNoZXJJZFN0cikgdGVhY2hlck1hcFt0ZWFjaGVySWRTdHJdID0gdGVhY2hlclxyXG4gICAgICAgICAgICBpZiAodGVhY2hlckVtYWlsKSB0ZWFjaGVyTWFwW3RlYWNoZXJFbWFpbF0gPSB0ZWFjaGVyXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZmV0Y2hFcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHMvdGVhY2hlcnM6JywgZmV0Y2hFcnJvcilcclxuICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGluZm9cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHdlIGhhdmUgbm8gZGF0YSwgcmV0dXJuIGVtcHR5IGFycmF5XHJcbiAgICBpZiAoIWRhdGEgfHwgIUFycmF5LmlzQXJyYXkoZGF0YSkgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfk60gTm8gYXR0ZW5kYW5jZSByZWNvcmRzIGZvdW5kIGluIGRhdGFiYXNlJylcclxuICAgICAgY29uc29sZS5sb2coJ/CfkqEgVGhpcyBjb3VsZCBtZWFuOicpXHJcbiAgICAgIGNvbnNvbGUubG9nKCcgICAxLiBObyBzY2FucyBoYXZlIGJlZW4gcmVjb3JkZWQgeWV0JylcclxuICAgICAgY29uc29sZS5sb2coJyAgIDIuIERhdGFiYXNlIHRhYmxlIGlzIGVtcHR5JylcclxuICAgICAgY29uc29sZS5sb2coJyAgIDMuIEVTUDMyIHNjYW5zIGFyZSBub3QgYmVpbmcgc2F2ZWQgKGNoZWNrIFBPU1QgZW5kcG9pbnQgbG9ncyknKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgcmVjb3JkczogW10sXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIGF0dGVuZGFuY2UgcmVjb3JkcyBmb3VuZC4gU2NhbnMgd2lsbCBhcHBlYXIgaGVyZSBvbmNlIHJlY29yZGVkLidcclxuICAgICAgfSwge1xyXG4gICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kICR7KGRhdGEgfHwgW10pLmxlbmd0aH0gYXR0ZW5kYW5jZSByZWNvcmRzYClcclxuICAgIGlmICgoZGF0YSB8fCBbXSkubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+ThSBTYW1wbGUgcmVjb3JkIHRpbWVzOicsIGRhdGEuc2xpY2UoMCwgMykubWFwKChyOiBhbnkpID0+ICh7XHJcbiAgICAgICAgc2Nhbl90aW1lOiByLnNjYW5fdGltZSxcclxuICAgICAgICBjcmVhdGVkX2F0OiByLmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgaWQ6IHIuaWRcclxuICAgICAgfSkpKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcm1hdCB0aGUgcmVzcG9uc2VcclxuICAgIGNvbnN0IGZvcm1hdHRlZFJlY29yZHMgPSAoZGF0YSB8fCBbXSkubWFwKChyZWNvcmQ6IGFueSkgPT4ge1xyXG4gICAgICAvLyBEZXRlcm1pbmUgc2NhbiB0eXBlIGZyb20gZGF0YWJhc2UgZmllbGRzXHJcbiAgICAgIGxldCBzY2FuVHlwZTogJ3RpbWVpbicgfCAndGltZW91dCcgfCBudWxsID0gbnVsbFxyXG4gICAgICBcclxuICAgICAgaWYgKHJlY29yZC50aW1lX2luICYmIHJlY29yZC5zY2FuX3RpbWUgPT09IHJlY29yZC50aW1lX2luKSB7XHJcbiAgICAgICAgc2NhblR5cGUgPSAndGltZWluJ1xyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50aW1lX291dCAmJiByZWNvcmQuc2Nhbl90aW1lID09PSByZWNvcmQudGltZV9vdXQpIHtcclxuICAgICAgICBzY2FuVHlwZSA9ICd0aW1lb3V0J1xyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC5zY2FuX3R5cGUpIHtcclxuICAgICAgICBzY2FuVHlwZSA9IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVfaW4nIHx8IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVpbicgPyAndGltZWluJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgcmVjb3JkLnNjYW5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZV9vdXQnIHx8IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVvdXQnID8gJ3RpbWVvdXQnIDogbnVsbFxyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlKSB7XHJcbiAgICAgICAgc2NhblR5cGUgPSByZWNvcmQudHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZV9pbicgfHwgcmVjb3JkLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVpbicgPyAndGltZWluJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgcmVjb3JkLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVfb3V0JyB8fCByZWNvcmQudHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZW91dCcgPyAndGltZW91dCcgOiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBzdHVkZW50IG9yIHRlYWNoZXIgaW5mbyBmcm9tIG1hcHNcclxuICAgICAgY29uc3Qgc3R1ZGVudCA9IHN0dWRlbnRNYXBbcmVjb3JkLnN0dWRlbnRfaWRdIHx8IG51bGxcclxuICAgICAgY29uc3QgdGVhY2hlciA9IHRlYWNoZXJNYXBbcmVjb3JkLnN0dWRlbnRfaWRdIHx8IG51bGxcclxuICAgICAgXHJcbiAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgdGVhY2hlciBvciBzdHVkZW50XHJcbiAgICAgIGNvbnN0IGlzVGVhY2hlciA9ICEhdGVhY2hlciB8fCAoc3R1ZGVudCAmJiAoXHJcbiAgICAgICAgc3R1ZGVudC5yb2xlID09PSAndGVhY2hlcicgfHwgXHJcbiAgICAgICAgc3R1ZGVudC51c2VyX3R5cGUgPT09ICd0ZWFjaGVyJyB8fFxyXG4gICAgICAgIHN0dWRlbnQudGVhY2hlcl9pZCB8fFxyXG4gICAgICAgICghc3R1ZGVudC5zdHVkZW50X2lkICYmICFzdHVkZW50LnN0dWRlbnRfbnVtYmVyKVxyXG4gICAgICApKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcGVyc29uID0gdGVhY2hlciB8fCBzdHVkZW50XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICBpZDogcmVjb3JkLmlkLFxyXG4gICAgICAgIHN0dWRlbnRJZDogcmVjb3JkLnN0dWRlbnRfaWQsXHJcbiAgICAgICAgc3R1ZGVudE5hbWU6IHBlcnNvblxyXG4gICAgICAgICAgPyBgJHtwZXJzb24uZmlyc3RfbmFtZSB8fCBwZXJzb24uZmlyc3ROYW1lIHx8ICcnfSAke3BlcnNvbi5sYXN0X25hbWUgfHwgcGVyc29uLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8IHBlcnNvbi5uYW1lIHx8ICdVbmtub3duJ1xyXG4gICAgICAgICAgOiAnVW5rbm93bicsXHJcbiAgICAgICAgZ3JhZGVMZXZlbDogaXNUZWFjaGVyID8gbnVsbCA6IChwZXJzb24/LmdyYWRlX2xldmVsIHx8IHBlcnNvbj8uZ3JhZGVMZXZlbCB8fCAnTi9BJyksXHJcbiAgICAgICAgc2VjdGlvbjogaXNUZWFjaGVyID8gbnVsbCA6IChwZXJzb24/LnNlY3Rpb24gfHwgJ04vQScpLFxyXG4gICAgICBzY2FuVGltZTogcmVjb3JkLnNjYW5fdGltZSB8fCByZWNvcmQuY3JlYXRlZF9hdCxcclxuICAgICAgc3RhdHVzOiByZWNvcmQuc3RhdHVzIHx8ICdQcmVzZW50JyxcclxuICAgICAgcmZpZENhcmQ6IHJlY29yZC5yZmlkX2NhcmQgfHwgJ04vQScsXHJcbiAgICAgICAgc3R1ZGVudFBob3RvOiBwZXJzb24/LnBob3RvX3VybCB8fCBwZXJzb24/LnByb2ZpbGVfcGljdHVyZSB8fCBwZXJzb24/LnBpY3R1cmUgfHwgbnVsbCxcclxuICAgICAgICBzY2FuVHlwZTogc2NhblR5cGUsXHJcbiAgICAgICAgdGltZUluOiByZWNvcmQudGltZV9pbiB8fCBudWxsLFxyXG4gICAgICAgIHRpbWVPdXQ6IHJlY29yZC50aW1lX291dCB8fCBudWxsLFxyXG4gICAgICAgIGlzVGVhY2hlcjogaXNUZWFjaGVyIHx8IGZhbHNlLFxyXG4gICAgICAgIHN1YmplY3Q6IGlzVGVhY2hlciA/IChwZXJzb24/LnN1YmplY3QgfHwgcGVyc29uPy5zdWJqZWN0cyB8fCBwZXJzb24/LnN1YmplY3RfdGF1Z2h0IHx8ICdOL0EnKSA6IG51bGwsXHJcbiAgICAgICAgcm9sZTogcGVyc29uPy5yb2xlIHx8IG51bGwsXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc29sZS5sb2coYPCfk6QgUmV0dXJuaW5nICR7KGZvcm1hdHRlZFJlY29yZHMgfHwgW10pLmxlbmd0aH0gZm9ybWF0dGVkIHJlY29yZHMgdG8gZnJvbnRlbmRgKVxyXG4gICAgaWYgKChmb3JtYXR0ZWRSZWNvcmRzIHx8IFtdKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OFIEZpcnN0IHJlY29yZCBzY2FuIHRpbWU6JywgZm9ybWF0dGVkUmVjb3Jkc1swXT8uc2NhblRpbWUpXHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OFIExhc3QgcmVjb3JkIHNjYW4gdGltZTonLCBmb3JtYXR0ZWRSZWNvcmRzW2Zvcm1hdHRlZFJlY29yZHMubGVuZ3RoIC0gMV0/LnNjYW5UaW1lKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHJlY29yZHM6IGZvcm1hdHRlZFJlY29yZHMsXHJcbiAgICAgIGNvdW50OiBmb3JtYXR0ZWRSZWNvcmRzLmxlbmd0aCxcclxuICAgIH0sIHtcclxuICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxyXG4gICAgfSlcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBdHRlbmRhbmNlIHJlY29yZHMgQVBJIGVycm9yOicsIGVycm9yKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhY2s6JywgZXJyb3I/LnN0YWNrKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbmFtZTonLCBlcnJvcj8ubmFtZSlcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgZXJyb3I/Lm1lc3NhZ2UpXHJcbiAgICBcclxuICAgIC8vIEFsd2F5cyByZXR1cm4gSlNPTiwgbmV2ZXIgbGV0IE5leHQuanMgcmV0dXJuIEhUTUwgZXJyb3IgcGFnZVxyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIC8vIFJldHVybiBzdWNjZXNzIHdpdGggZW1wdHkgcmVjb3JkcyB0byBwcmV2ZW50IGZyb250ZW5kIGNyYXNoXHJcbiAgICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICAgIHdhcm5pbmc6ICdVbmFibGUgdG8gZmV0Y2ggYXR0ZW5kYW5jZSByZWNvcmRzJyxcclxuICAgICAgICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8ge1xyXG4gICAgICAgICAgICBzdGFjazogZXJyb3I/LnN0YWNrLFxyXG4gICAgICAgICAgICBuYW1lOiBlcnJvcj8ubmFtZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UsXHJcbiAgICAgICAgICB9IDogdW5kZWZpbmVkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN0YXR1czogMjAwLCAvLyBSZXR1cm4gMjAwIHRvIHByZXZlbnQgZnJvbnRlbmQgZnJvbSB0cmVhdGluZyBpdCBhcyBhbiBlcnJvclxyXG4gICAgICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMsXHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICB9IGNhdGNoIChqc29uRXJyb3I6IGFueSkge1xyXG4gICAgICAvLyBFdmVuIGlmIEpTT04gY3JlYXRpb24gZmFpbHMsIHJldHVybiBhIHNpbXBsZSB0ZXh0IHJlc3BvbnNlIGFzIEpTT05cclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBKU09OIHJlc3BvbnNlOicsIGpzb25FcnJvcilcclxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIHJlY29yZHM6IFtdLFxyXG4gICAgICAgICAgd2FybmluZzogJ1NlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMsXHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgLy8gU2V0IGRlZmF1bHQgaGVhZGVycyBmb3IgYWxsIHJlc3BvbnNlc1xyXG4gIGNvbnN0IHBvc3RIZWFkZXJzID0ge1xyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICB9XHJcblxyXG4gIC8vIFdyYXAgZXZlcnl0aGluZyBpbiB0cnktY2F0Y2ggdG8gZW5zdXJlIHdlIGFsd2F5cyByZXR1cm4gSlNPTiAoZm9yIFZlcmNlbClcclxuICB0cnkge1xyXG4gICAgLy8gRGVidWc6IExvZyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcclxuICAgIGNvbnNvbGUubG9nKFwiPT09IFBPU1Q6IEVOVklST05NRU5UIFZBUklBQkxFUyBERUJVRyA9PT1cIilcclxuICAgIGNvbnNvbGUubG9nKFwiVVJMOlwiLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPyBcIlNFVFwiIDogXCJNSVNTSU5HXCIpXHJcbiAgICBjb25zb2xlLmxvZyhcIlVSTCBWYWx1ZTpcIiwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMKVxyXG4gICAgY29uc29sZS5sb2coXCJBTk9OOlwiLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSA/IFwiU0VUXCIgOiBcIk1JU1NJTkdcIilcclxuICAgIGNvbnNvbGUubG9nKFwiQU5PTiBLZXkgKGZpcnN0IDIwIGNoYXJzKTpcIiwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk/LnN1YnN0cmluZygwLCAyMCkgfHwgXCJNSVNTSU5HXCIpXHJcbiAgICBjb25zb2xlLmxvZyhcIlNFUlZJQ0U6XCIsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgPyBcIlNFVFwiIDogXCJNSVNTSU5HXCIpXHJcbiAgICBjb25zb2xlLmxvZyhcIlNFUlZJQ0UgS2V5IChmaXJzdCAyMCBjaGFycyk6XCIsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk/LnN1YnN0cmluZygwLCAyMCkgfHwgXCJNSVNTSU5HXCIpXHJcbiAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiKVxyXG5cclxuICAgIGxldCBzY2FuRGF0YTogYW55ID0gbnVsbFxyXG4gICAgdHJ5IHtcclxuICAgICAgc2NhbkRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgfSBjYXRjaCAoanNvbkVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyByZXF1ZXN0IEpTT046JywganNvbkVycm9yKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBKU09OIGluIHJlcXVlc3QgYm9keScsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVuc3VyZSB0aGUgcmVxdWVzdCBjb250YWlucyB2YWxpZCBKU09OJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzLFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXNjYW5EYXRhKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgZXJyb3I6ICdSZXF1ZXN0IGJvZHkgaXMgcmVxdWlyZWQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBpbmNsdWRlIFJGSUQgY2FyZCBkYXRhIGluIHRoZSByZXF1ZXN0JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzLFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgIGlmICghc2NhbkRhdGEuc3R1ZGVudElkICYmICFzY2FuRGF0YS5yZmlkQ2FyZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIGVycm9yOiAnU3R1ZGVudCBJRCBvciBSRklEIENhcmQgaXMgcmVxdWlyZWQnLFxyXG4gICAgICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IFxyXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCwgLy8gUmV0dXJuIDIwMCB0byBwcmV2ZW50IGZyb250ZW5kIGNyYXNoLCBidXQgaW5jbHVkZSBlcnJvciBpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAvLyBVc2UgYWRtaW4gY2xpZW50IGZvciBpbnNlcnRzIHRvIGJ5cGFzcyBSTFMgcG9saWNpZXNcclxuICAgIC8vIFRoaXMgYXZvaWRzIFVVSUQvVEVYVCBjb21wYXJpc29uIGVycm9ycyBpbiBSTFMgcG9saWNpZXNcclxuICAgIGNvbnN0IHN1cGFiYXNlQ2xpZW50ID0gZ2V0U3VwYWJhc2VBZG1pbigpXHJcbiAgICBcclxuICAgIGlmICghc3VwYWJhc2VDbGllbnQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJylcclxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdTY2FuIHJlY29yZGVkIChkZXYgbW9kZSAtIG5vdCBzYXZlZCB0byBkYXRhYmFzZSknLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogJ0RhdGFiYXNlIHNlcnZpY2Ugbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBjaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy4nLFxyXG4gICAgICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IFxyXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCwgLy8gUmV0dXJuIDIwMCB3aXRoIGVycm9yIG1lc3NhZ2UgaW5zdGVhZCBvZiA1MDBcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgY3VycmVudCBkYXRlIChzdGFydCBvZiBkYXkpIGZvciBjaGVja2luZyBleGlzdGluZyByZWNvcmRzXHJcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxyXG4gICAgICBjb25zdCB0b2RheVN0YXJ0ID0gdG9kYXkudG9JU09TdHJpbmcoKVxyXG4gICAgICBjb25zdCB0b2RheUVuZCA9IG5ldyBEYXRlKHRvZGF5KVxyXG4gICAgICB0b2RheUVuZC5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpXHJcbiAgICAgIGNvbnN0IHRvZGF5RW5kSVNPID0gdG9kYXlFbmQudG9JU09TdHJpbmcoKVxyXG5cclxuICAgICAgLy8gRmluZCBzdHVkZW50IGJ5IFJGSUQgY2FyZCBvciBzdHVkZW50IElEXHJcbiAgICAgIGxldCBzdHVkZW50SWQgPSBzY2FuRGF0YS5zdHVkZW50SWRcclxuICAgICAgaWYgKCFzdHVkZW50SWQgJiYgc2NhbkRhdGEucmZpZENhcmQpIHtcclxuICAgICAgICAvLyBOb3JtYWxpemUgUkZJRCBjYXJkIC0gcmVtb3ZlIHNwYWNlcywgY29udmVydCB0byB1cHBlcmNhc2UsIHJlbW92ZSBsZWFkaW5nIHplcm9zXHJcbiAgICAgICAgbGV0IHJmaWROb3JtYWxpemVkID0gc2NhbkRhdGEucmZpZENhcmQudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICcnKVxyXG4gICAgICAgIC8vIEFsc28gY3JlYXRlIHZlcnNpb24gd2l0aG91dCBsZWFkaW5nIHplcm9zIGZvciBtYXRjaGluZ1xyXG4gICAgICAgIGNvbnN0IHJmaWROb0xlYWRpbmdaZXJvcyA9IHJmaWROb3JtYWxpemVkLnJlcGxhY2UoL14wKy8sICcnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBTZWFyY2hpbmcgZm9yIHN0dWRlbnQgd2l0aCBSRklEOiAke3JmaWROb3JtYWxpemVkfSAoYWxzbyB0cnlpbmc6ICR7cmZpZE5vTGVhZGluZ1plcm9zfSlgKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZldGNoIGFsbCBzdHVkZW50cyBhbmQgZmlsdGVyIGluIG1lbW9yeSB0byBhdm9pZCBjb2x1bW4gZXJyb3JzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhbGxTdHVkZW50cywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgnc3R1ZGVudHMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMTAwMClcclxuXHJcbiAgICAgICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN0dWRlbnRzOicsIGZldGNoRXJyb3IpXHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgICAgIGVycm9yOiBgRGF0YWJhc2UgZXJyb3I6ICR7ZmV0Y2hFcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgc2VhcmNoZWRSZmlkOiByZmlkTm9ybWFsaXplZCxcclxuICAgICAgICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICBzdGF0dXM6IDIwMCwgLy8gUmV0dXJuIDIwMCB3aXRoIGVycm9yIG1lc3NhZ2UgaW5zdGVhZCBvZiA1MDBcclxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZJUlNUIGNoZWNrIHRlYWNoZXJzIHRhYmxlIChwcmlvcml0aXplIHRlYWNoZXJzIG92ZXIgc3R1ZGVudHMgaWYgc2FtZSBSRklEKVxyXG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0ZWFjaGVyIHNjYW5zIGFyZSByZWNvcmRlZCBhcyB0ZWFjaGVycywgbm90IHN0dWRlbnRzXHJcbiAgICAgICAgY29uc29sZS5sb2coYENoZWNraW5nIHRlYWNoZXJzIGZpcnN0IGZvciBSRklEOiAke3JmaWROb3JtYWxpemVkfWApXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhbGxUZWFjaGVycywgZXJyb3I6IHRlYWNoZXJzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgndGVhY2hlcnMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMTAwMClcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWF0Y2hlZFRlYWNoZXIgPSBudWxsXHJcbiAgICAgICAgaWYgKCF0ZWFjaGVyc0Vycm9yICYmIGFsbFRlYWNoZXJzKSB7XHJcbiAgICAgICAgICAvLyBGaWx0ZXIgdGVhY2hlcnMgaW4gbWVtb3J5IGJ5IFJGSUQgKGNoZWNrIGFsbCBwb3NzaWJsZSBjb2x1bW4gbmFtZXMpXHJcbiAgICAgICAgICBjb25zdCB0ZWFjaGVycyA9IChhbGxUZWFjaGVycyB8fCBbXSkuZmlsdGVyKCh0ZWFjaGVyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmZpZDEgPSAodGVhY2hlci5yZmlkX2NhcmQgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpLnRvVXBwZXJDYXNlKClcclxuICAgICAgICAgICAgY29uc3QgcmZpZDIgPSAodGVhY2hlci5yZmlkQ2FyZCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgICBjb25zdCByZmlkMyA9ICh0ZWFjaGVyLnJmaWRfdGFnIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKS50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgIGNvbnN0IHJmaWQ0ID0gKHRlYWNoZXIucmZpZFRhZyB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJmaWQxID09PSByZmlkTm9ybWFsaXplZCB8fCByZmlkMSA9PT0gcmZpZE5vTGVhZGluZ1plcm9zIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMiA9PT0gcmZpZE5vcm1hbGl6ZWQgfHwgcmZpZDIgPT09IHJmaWROb0xlYWRpbmdaZXJvcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgcmZpZDMgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQzID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgICAgIHJmaWQ0ID09PSByZmlkTm9ybWFsaXplZCB8fCByZmlkNCA9PT0gcmZpZE5vTGVhZGluZ1plcm9zIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMS5pbmNsdWRlcyhyZmlkTm9ybWFsaXplZCkgfHwgcmZpZDIuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMy5pbmNsdWRlcyhyZmlkTm9ybWFsaXplZCkgfHwgcmZpZDQuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAodGVhY2hlcnMgJiYgdGVhY2hlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBtYXRjaGVkVGVhY2hlciA9IHRlYWNoZXJzWzBdXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgdGVhY2hlciBGSVJTVDogJHttYXRjaGVkVGVhY2hlci5maXJzdF9uYW1lIHx8IG1hdGNoZWRUZWFjaGVyLmZpcnN0TmFtZSB8fCAnVW5rbm93bid9ICR7bWF0Y2hlZFRlYWNoZXIubGFzdF9uYW1lIHx8IG1hdGNoZWRUZWFjaGVyLmxhc3ROYW1lIHx8ICcnfWApXHJcbiAgICAgICAgICAgIC8vIFVzZSB0ZWFjaGVyX2lkIG9yIGlkIChURVhUKSBmb3IgYXR0ZW5kYW5jZV9yZWNvcmRzLnN0dWRlbnRfaWRcclxuICAgICAgICAgICAgc3R1ZGVudElkID0gbWF0Y2hlZFRlYWNoZXIudGVhY2hlcl9pZCB8fCBtYXRjaGVkVGVhY2hlci5pZD8udG9TdHJpbmcoKSB8fCBtYXRjaGVkVGVhY2hlci5lbWFpbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBubyB0ZWFjaGVyIGZvdW5kLCBjaGVjayBzdHVkZW50cyB0YWJsZVxyXG4gICAgICAgIGlmICghbWF0Y2hlZFRlYWNoZXIpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBObyB0ZWFjaGVyIGZvdW5kLCBjaGVja2luZyBzdHVkZW50cyBmb3IgUkZJRDogJHtyZmlkTm9ybWFsaXplZH1gKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGaWx0ZXIgc3R1ZGVudHMgaW4gbWVtb3J5IGJ5IFJGSUQgKGNoZWNrIGFsbCBwb3NzaWJsZSBjb2x1bW4gbmFtZXMpXHJcbiAgICAgICAgICAvLyBQcmlvcml0eTogcmZpZF9jYXJkICh3aGF0IEVTUDMyIGV4cGVjdHMpID4gcmZpZENhcmQgPiByZmlkX3RhZyA+IHJmaWRUYWdcclxuICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gKGFsbFN0dWRlbnRzIHx8IFtdKS5maWx0ZXIoKHN0dWRlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZmlkMSA9IChzdHVkZW50LnJmaWRfY2FyZCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKSAgLy8gUHJpbWFyeSAtIEVTUDMyIGV4cGVjdHMgdGhpc1xyXG4gICAgICAgICAgICBjb25zdCByZmlkMiA9IChzdHVkZW50LnJmaWRDYXJkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKS50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgIGNvbnN0IHJmaWQzID0gKHN0dWRlbnQucmZpZF90YWcgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpLnRvVXBwZXJDYXNlKClcclxuICAgICAgICAgICAgY29uc3QgcmZpZDQgPSAoc3R1ZGVudC5yZmlkVGFnIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKS50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBleGFjdCBtYXRjaGVzIGZpcnN0LCB0aGVuIHBhcnRpYWxcclxuICAgICAgICAgICAgcmV0dXJuIHJmaWQxID09PSByZmlkTm9ybWFsaXplZCB8fCByZmlkMSA9PT0gcmZpZE5vTGVhZGluZ1plcm9zIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMiA9PT0gcmZpZE5vcm1hbGl6ZWQgfHwgcmZpZDIgPT09IHJmaWROb0xlYWRpbmdaZXJvcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgcmZpZDMgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQzID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgICAgIHJmaWQ0ID09PSByZmlkTm9ybWFsaXplZCB8fCByZmlkNCA9PT0gcmZpZE5vTGVhZGluZ1plcm9zIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMS5pbmNsdWRlcyhyZmlkTm9ybWFsaXplZCkgfHwgcmZpZDIuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICByZmlkMy5pbmNsdWRlcyhyZmlkTm9ybWFsaXplZCkgfHwgcmZpZDQuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpXHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIGlmICghc3R1ZGVudHMgfHwgc3R1ZGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIE5laXRoZXIgc3R1ZGVudCBub3IgdGVhY2hlciBmb3VuZFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIE5vIHN0dWRlbnQgb3IgdGVhY2hlciBmb3VuZCB3aXRoIFJGSUQ6ICR7cmZpZE5vcm1hbGl6ZWR9YClcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYE5vIHN0dWRlbnQgb3IgdGVhY2hlciBmb3VuZCBmb3IgUkZJRDogJHtyZmlkTm9ybWFsaXplZH0uIFBsZWFzZSBhc3NpZ24gdGhpcyBSRklEIGNhcmQgaW4gdGhlIGFkbWluIHBhbmVsLmAsXHJcbiAgICAgICAgICAgICAgICBzZWFyY2hlZFJmaWQ6IHJmaWROb3JtYWxpemVkLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFJGSUQgJHtyZmlkTm9ybWFsaXplZH0gbm90IGFzc2lnbmVkIHRvIGFueSBzdHVkZW50IG9yIHRlYWNoZXJgXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiA0MDQsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRm91bmQgYSBzdHVkZW50XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRTdHVkZW50ID0gc3R1ZGVudHNbMF1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIHN0dWRlbnQ6ICR7bWF0Y2hlZFN0dWRlbnQuZmlyc3RfbmFtZSB8fCBtYXRjaGVkU3R1ZGVudC5maXJzdE5hbWUgfHwgJ1Vua25vd24nfSAke21hdGNoZWRTdHVkZW50Lmxhc3RfbmFtZSB8fCBtYXRjaGVkU3R1ZGVudC5sYXN0TmFtZSB8fCAnJ31gKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXNlIHN0dWRlbnRfbnVtYmVyIG9yIHN0dWRlbnRfaWQgKFRFWFQpIC0gTk9UIHRoZSBVVUlEIGlkXHJcbiAgICAgICAgICAgIC8vIGF0dGVuZGFuY2VfcmVjb3Jkcy5zdHVkZW50X2lkIGlzIFRFWFQgdHlwZSwgc28gd2Ugc3RvcmUgVEVYVCB2YWx1ZXNcclxuICAgICAgICAgICAgc3R1ZGVudElkID0gbWF0Y2hlZFN0dWRlbnQuc3R1ZGVudF9udW1iZXIgfHwgbWF0Y2hlZFN0dWRlbnQuc3R1ZGVudF9pZCB8fCBtYXRjaGVkU3R1ZGVudC5zdHVkZW50SWQgfHwgbWF0Y2hlZFN0dWRlbnQuaWQ/LnRvU3RyaW5nKClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHN0dWRlbnQgaGFzIGFscmVhZHkgc2Nhbm5lZCBpbiB0b2RheVxyXG4gICAgICAvLyBzdHVkZW50X2lkIGlzIG5vdyBURVhUIHR5cGUsIHNvIHdlIGNhbiBxdWVyeSBkaXJlY3RseVxyXG4gICAgICAvLyBCdXQgd2UgbmVlZCB0byBjYXN0IHRvIHRleHQgdG8gYXZvaWQgVVVJRCBjb21wYXJpc29uIGVycm9yc1xyXG4gICAgICBsZXQgdG9kYXlSZWNvcmRzOiBhbnlbXSA9IFtdXHJcbiAgICAgIGxldCBjaGVja0Vycm9yOiBhbnkgPSBudWxsXHJcbiAgICAgIFxyXG4gICAgICAvLyBGZXRjaCBhbGwgcmVjb3JkcyBmb3IgdG9kYXksIHRoZW4gZmlsdGVyIGluIG1lbW9yeSB0byBhdm9pZCB0eXBlIG1pc21hdGNoXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogYWxsVG9kYXlSZWNvcmRzLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnRcclxuICAgICAgICAuZnJvbSgnYXR0ZW5kYW5jZV9yZWNvcmRzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgc2Nhbl90eXBlLCBzY2FuX3RpbWUsIHRpbWVfaW4sIHRpbWVfb3V0LCBzdHVkZW50X2lkJylcclxuICAgICAgICAuZ3RlKCdzY2FuX3RpbWUnLCB0b2RheVN0YXJ0KVxyXG4gICAgICAgIC5sdGUoJ3NjYW5fdGltZScsIHRvZGF5RW5kSVNPKVxyXG4gICAgICAgIC5vcmRlcignc2Nhbl90aW1lJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcclxuICAgICAgXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB7XHJcbiAgICAgICAgY2hlY2tFcnJvciA9IGZldGNoRXJyb3JcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0b2RheSByZWNvcmRzOicsIGZldGNoRXJyb3IpXHJcbiAgICAgIH0gZWxzZSBpZiAoYWxsVG9kYXlSZWNvcmRzKSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIGluIG1lbW9yeSBieSBzdHVkZW50X2lkICh0ZXh0IG1hdGNoKSB0byBhdm9pZCBVVUlEL1RFWFQgY29tcGFyaXNvbiBpc3N1ZXNcclxuICAgICAgICB0b2RheVJlY29yZHMgPSBhbGxUb2RheVJlY29yZHMuZmlsdGVyKChyOiBhbnkpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHJJZCA9IChyLnN0dWRlbnRfaWQgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgICAgICAgICBjb25zdCBzSWQgPSAoc3R1ZGVudElkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgcmV0dXJuIHJJZCA9PT0gc0lkIHx8IHJJZCA9PT0gc3R1ZGVudElkIHx8IHNJZCA9PT0gci5zdHVkZW50X2lkXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNoZWNrRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBleGlzdGluZyByZWNvcmRzOicsIGNoZWNrRXJyb3IpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERldGVybWluZSBzY2FuIHR5cGVcclxuICAgICAgLy8gQUxXQVlTIHJlY29yZCBhcyBcInRpbWVpblwiIGJ5IGRlZmF1bHQsIHVubGVzcyB0aW1lb3V0IG1vZGUgaXMgYWN0aXZlXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIGxldCBzY2FuVHlwZTogJ3RpbWVpbicgfCAndGltZW91dCcgPSAndGltZWluJ1xyXG4gICAgICBsZXQgdGltZUluID0gbnVsbFxyXG4gICAgICBsZXQgdGltZU91dCA9IG51bGxcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRpbWVvdXQgbW9kZSBpcyBhY3RpdmUgKGJ1dHRvbiB3YXMgY2xpY2tlZCBpbiBkaXNwbGF5IHBhZ2UpXHJcbiAgICAgIGNvbnN0IHRpbWVvdXRNb2RlQWN0aXZlID0gaXNUaW1lb3V0TW9kZUFjdGl2ZSgpXHJcbiAgICAgIFxyXG4gICAgICBpZiAodGltZW91dE1vZGVBY3RpdmUpIHtcclxuICAgICAgICAvLyBUaW1lb3V0IG1vZGUgaXMgYWN0aXZlIC0gcmVjb3JkIGFzIHRpbWVvdXRcclxuICAgICAgICBzY2FuVHlwZSA9ICd0aW1lb3V0J1xyXG4gICAgICAgIHRpbWVPdXQgPSBjdXJyZW50VGltZVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZpbmQgdGhlIG1vc3QgcmVjZW50IHRpbWUgaW4gcmVjb3JkIGZvciB0aGlzIHN0dWRlbnQgdG9kYXlcclxuICAgICAgICBpZiAodG9kYXlSZWNvcmRzICYmIHRvZGF5UmVjb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCB0aW1lSW5SZWNvcmQgPSB0b2RheVJlY29yZHNcclxuICAgICAgICAgICAgLmZpbHRlcigocjogYW55KSA9PiByLnNjYW5fdHlwZSA9PT0gJ3RpbWVpbicgfHwgci5zY2FuX3R5cGUgPT09ICd0aW1lX2luJylcclxuICAgICAgICAgICAgLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiBuZXcgRGF0ZShiLnNjYW5fdGltZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5zY2FuX3RpbWUpLmdldFRpbWUoKSlbMF1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKHRpbWVJblJlY29yZCkge1xyXG4gICAgICAgICAgICB0aW1lSW4gPSB0aW1lSW5SZWNvcmQudGltZV9pbiB8fCB0aW1lSW5SZWNvcmQuc2Nhbl90aW1lXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCfij7AgVGltZW91dCBtb2RlIGFjdGl2ZSAtIHJlY29yZGluZyBhcyB0aW1lb3V0JylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBbHdheXMgcmVjb3JkIGFzIHRpbWUgaW4gKGRlZmF1bHQgYmVoYXZpb3IpXHJcbiAgICAgICAgc2NhblR5cGUgPSAndGltZWluJ1xyXG4gICAgICAgIHRpbWVJbiA9IGN1cnJlbnRUaW1lXHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZWNvcmRpbmcgYXMgdGltZSBpbiAoZGVmYXVsdCknKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJbnNlcnQgdGhlIGF0dGVuZGFuY2UgcmVjb3JkXHJcbiAgICAgIC8vIEJ1aWxkIGluc2VydCBvYmplY3Qgd2l0aCBhbGwgcmVxdWlyZWQgZmllbGRzXHJcbiAgICAgIGNvbnN0IGF0dGVuZGFuY2VSZWNvcmQ6IGFueSA9IHtcclxuICAgICAgICBzdHVkZW50X2lkOiBzdHVkZW50SWQsXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEFkZCBSRklEIGZpZWxkcyAtIHNldCBib3RoIHJmaWRfY2FyZCBhbmQgcmZpZF90YWcgdG8gYXZvaWQgTk9UIE5VTEwgY29uc3RyYWludCBlcnJvcnNcclxuICAgICAgY29uc3QgcmZpZFZhbHVlID0gc2NhbkRhdGEucmZpZENhcmQgfHwgJydcclxuICAgICAgaWYgKHJmaWRWYWx1ZSkge1xyXG4gICAgICAgIGF0dGVuZGFuY2VSZWNvcmQucmZpZF9jYXJkID0gcmZpZFZhbHVlXHJcbiAgICAgICAgYXR0ZW5kYW5jZVJlY29yZC5yZmlkX3RhZyA9IHJmaWRWYWx1ZSAgLy8gU29tZSBzY2hlbWFzIHVzZSByZmlkX3RhZyBpbnN0ZWFkXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgbm8gUkZJRCBwcm92aWRlZCwgc2V0IGVtcHR5IHN0cmluZyB0byBhdm9pZCBOT1QgTlVMTCBjb25zdHJhaW50XHJcbiAgICAgICAgYXR0ZW5kYW5jZVJlY29yZC5yZmlkX2NhcmQgPSAnJ1xyXG4gICAgICAgIGF0dGVuZGFuY2VSZWNvcmQucmZpZF90YWcgPSAnJ1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZXQgZGV2aWNlX2lkIC0gaWYgY29sdW1uIGlzIFVVSUQgdHlwZSwgd2UgY2FuJ3QgdXNlIHRleHQsIHNvIHNldCB0byBudWxsXHJcbiAgICAgIC8vIElmIGNvbHVtbiBpcyBURVhUIHR5cGUsIHdlIGNhbiB1c2UgYSBkZXZpY2UgaWRlbnRpZmllclxyXG4gICAgICAvLyBGb3Igbm93LCBkb24ndCBzZXQgaXQgdG8gYXZvaWQgVVVJRCB0eXBlIGVycm9yc1xyXG4gICAgICAvLyBhdHRlbmRhbmNlUmVjb3JkLmRldmljZV9pZCA9IHNjYW5EYXRhLmRldmljZUlkIHx8IG51bGxcclxuICAgICAgXHJcbiAgICAgIGF0dGVuZGFuY2VSZWNvcmQuc2Nhbl90aW1lID0gY3VycmVudFRpbWVcclxuICAgICAgYXR0ZW5kYW5jZVJlY29yZC5zY2FuX3R5cGUgPSBzY2FuVHlwZVxyXG4gICAgICBhdHRlbmRhbmNlUmVjb3JkLnRpbWVfaW4gPSB0aW1lSW5cclxuICAgICAgYXR0ZW5kYW5jZVJlY29yZC50aW1lX291dCA9IHRpbWVPdXRcclxuICAgICAgYXR0ZW5kYW5jZVJlY29yZC5zdGF0dXMgPSBzY2FuVHlwZSA9PT0gJ3RpbWVpbicgPyAnUHJlc2VudCcgOiAnUHJlc2VudCdcclxuICAgICAgYXR0ZW5kYW5jZVJlY29yZC5jcmVhdGVkX2F0ID0gY3VycmVudFRpbWVcclxuICAgICAgXHJcbiAgICAgIC8vIE9wdGlvbmFsIHR5cGUgZmllbGQgZm9yIGNvbXBhdGliaWxpdHlcclxuICAgICAgYXR0ZW5kYW5jZVJlY29yZC50eXBlID0gc2NhblR5cGVcclxuICAgICAgXHJcbiAgICAgIC8vIEluc2VydCB0aGUgYXR0ZW5kYW5jZSByZWNvcmQgKHdpdGhvdXQgam9pbiB0byBhdm9pZCBmb3JlaWduIGtleSBpc3N1ZXMpXHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5K+IEluc2VydGluZyBhdHRlbmRhbmNlIHJlY29yZDonLCB7XHJcbiAgICAgICAgc3R1ZGVudF9pZDogYXR0ZW5kYW5jZVJlY29yZC5zdHVkZW50X2lkLFxyXG4gICAgICAgIHJmaWRfY2FyZDogYXR0ZW5kYW5jZVJlY29yZC5yZmlkX2NhcmQsXHJcbiAgICAgICAgc2Nhbl90eXBlOiBhdHRlbmRhbmNlUmVjb3JkLnNjYW5fdHlwZSxcclxuICAgICAgICBzY2FuX3RpbWU6IGF0dGVuZGFuY2VSZWNvcmQuc2Nhbl90aW1lXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGE6IG5ld1JlY29yZCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgIC5mcm9tKCdhdHRlbmRhbmNlX3JlY29yZHMnKVxyXG4gICAgICAgIC5pbnNlcnQoW2F0dGVuZGFuY2VSZWNvcmRdKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEluc2VydCBmYWlsZWQ6JywgaW5zZXJ0RXJyb3IpXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgaW5zZXJ0RXJyb3IpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW4gZGV2ZWxvcG1lbnQsIHJldHVybiBzdWNjZXNzIGV2ZW4gaWYgdGFibGUgZG9lc24ndCBleGlzdFxyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1NjYW4gZGF0YSAoZGV2IG1vZGUpOicsIHsgc3R1ZGVudElkLCBzY2FuVHlwZSwgdGltZUluLCB0aW1lT3V0IH0pXHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2NhbiByZWNvcmRlZCAoZGV2IG1vZGUgLSBub3Qgc2F2ZWQgdG8gZGF0YWJhc2UpJyxcclxuICAgICAgICAgICAgc2NhblR5cGUsXHJcbiAgICAgICAgICAgIHRpbWVJbixcclxuICAgICAgICAgICAgdGltZU91dCxcclxuICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgaGludDogJ1BsZWFzZSBjaGVjayB0aGF0IGFsbCByZXF1aXJlZCBjb2x1bW5zIGV4aXN0IGluIGF0dGVuZGFuY2VfcmVjb3JkcyB0YWJsZS4gUnVuIGNyZWF0ZS1hdHRlbmRhbmNlLXRhYmxlLnNxbCBpbiBTdXBhYmFzZS4nLFxyXG4gICAgICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IFxyXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCwgLy8gUmV0dXJuIDIwMCB3aXRoIGVycm9yIG1lc3NhZ2UgaW5zdGVhZCBvZiA1MDBcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGZXRjaCBzdHVkZW50IG9yIHRlYWNoZXIgaW5mb3JtYXRpb24gc2VwYXJhdGVseSB0byBhdm9pZCBqb2luIGlzc3Vlc1xyXG4gICAgICAvLyBGZXRjaCBhbGwgc3R1ZGVudHMgYW5kIGZpbHRlciBpbiBtZW1vcnkgdG8gYXZvaWQgVVVJRC9URVhUIGNvbXBhcmlzb24gZXJyb3JzXHJcbiAgICAgIGxldCBwZXJzb25JbmZvOiBhbnkgPSBudWxsXHJcbiAgICAgIGxldCBpc1RlYWNoZXIgPSBmYWxzZVxyXG4gICAgICBcclxuICAgICAgaWYgKHN0dWRlbnRJZCkge1xyXG4gICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gZmluZCBpbiBzdHVkZW50cyB0YWJsZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWxsU3R1ZGVudHMgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgnc3R1ZGVudHMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMTAwMClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYWxsU3R1ZGVudHMpIHtcclxuICAgICAgICAgIC8vIEZpbmQgbWF0Y2hpbmcgc3R1ZGVudCBieSBjb21wYXJpbmcgYXMgc3RyaW5nc1xyXG4gICAgICAgICAgY29uc3Qgc3R1ZGVudElkU3RyID0gKHN0dWRlbnRJZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgIHBlcnNvbkluZm8gPSBhbGxTdHVkZW50cy5maW5kKChzdHVkZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc0lkID0gKHN0dWRlbnQuc3R1ZGVudF9pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgICAgY29uc3Qgc051bSA9IChzdHVkZW50LnN0dWRlbnRfbnVtYmVyIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICBjb25zdCBzVXVpZCA9IChzdHVkZW50LmlkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICByZXR1cm4gc0lkID09PSBzdHVkZW50SWRTdHIgfHwgc051bSA9PT0gc3R1ZGVudElkU3RyIHx8IHNVdWlkID09PSBzdHVkZW50SWRTdHJcclxuICAgICAgICAgIH0pIHx8IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIGluIHN0dWRlbnRzLCB0cnkgdGVhY2hlcnMgdGFibGVcclxuICAgICAgICBpZiAoIXBlcnNvbkluZm8pIHtcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogYWxsVGVhY2hlcnMgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAgIC5mcm9tKCd0ZWFjaGVycycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgICAubGltaXQoMTAwMClcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGFsbFRlYWNoZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBlcnNvbklkU3RyID0gKHN0dWRlbnRJZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgICAgcGVyc29uSW5mbyA9IGFsbFRlYWNoZXJzLmZpbmQoKHRlYWNoZXI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRJZCA9ICh0ZWFjaGVyLnRlYWNoZXJfaWQgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgICAgICAgICAgICAgY29uc3QgdFV1aWQgPSAodGVhY2hlci5pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgICAgICBjb25zdCB0RW1haWwgPSAodGVhY2hlci5lbWFpbCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgIHJldHVybiB0SWQgPT09IHBlcnNvbklkU3RyIHx8IHRVdWlkID09PSBwZXJzb25JZFN0ciB8fCB0RW1haWwgPT09IHBlcnNvbklkU3RyXHJcbiAgICAgICAgICAgIH0pIHx8IG51bGxcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChwZXJzb25JbmZvKSB7XHJcbiAgICAgICAgICAgICAgaXNUZWFjaGVyID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGb3JtYXQgdGhlIHJlc3BvbnNlXHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFJlY29yZCA9IHtcclxuICAgICAgICBpZDogbmV3UmVjb3JkLmlkLFxyXG4gICAgICAgIHN0dWRlbnRJZDogbmV3UmVjb3JkLnN0dWRlbnRfaWQgfHwgc3R1ZGVudElkLFxyXG4gICAgICAgIHN0dWRlbnROYW1lOiBwZXJzb25JbmZvXHJcbiAgICAgICAgICA/IGAke3BlcnNvbkluZm8uZmlyc3RfbmFtZSB8fCBwZXJzb25JbmZvLmZpcnN0TmFtZSB8fCAnJ30gJHtwZXJzb25JbmZvLmxhc3RfbmFtZSB8fCBwZXJzb25JbmZvLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8IHBlcnNvbkluZm8ubmFtZSB8fCAnVW5rbm93bidcclxuICAgICAgICAgIDogJ1Vua25vd24nLFxyXG4gICAgICAgIGdyYWRlTGV2ZWw6IGlzVGVhY2hlciA/IG51bGwgOiAocGVyc29uSW5mbz8uZ3JhZGVfbGV2ZWwgfHwgcGVyc29uSW5mbz8uZ3JhZGVMZXZlbCB8fCAnTi9BJyksXHJcbiAgICAgICAgc2VjdGlvbjogaXNUZWFjaGVyID8gbnVsbCA6IChwZXJzb25JbmZvPy5zZWN0aW9uIHx8ICdOL0EnKSxcclxuICAgICAgICBzY2FuVGltZTogbmV3UmVjb3JkLnNjYW5fdGltZSB8fCBuZXdSZWNvcmQuY3JlYXRlZF9hdCxcclxuICAgICAgICBzdGF0dXM6IG5ld1JlY29yZC5zdGF0dXMgfHwgJ1ByZXNlbnQnLFxyXG4gICAgICAgIHJmaWRDYXJkOiBuZXdSZWNvcmQucmZpZF9jYXJkIHx8IHNjYW5EYXRhLnJmaWRDYXJkIHx8ICdOL0EnLFxyXG4gICAgICAgIHN0dWRlbnRQaG90bzogcGVyc29uSW5mbz8ucGhvdG9fdXJsIHx8IHBlcnNvbkluZm8/LnByb2ZpbGVfcGljdHVyZSB8fCBwZXJzb25JbmZvPy5waWN0dXJlIHx8IG51bGwsXHJcbiAgICAgICAgc2NhblR5cGU6IHNjYW5UeXBlLFxyXG4gICAgICAgIHRpbWVJbjogbmV3UmVjb3JkLnRpbWVfaW4gfHwgbnVsbCxcclxuICAgICAgICB0aW1lT3V0OiBuZXdSZWNvcmQudGltZV9vdXQgfHwgbnVsbCxcclxuICAgICAgICBpc1RlYWNoZXI6IGlzVGVhY2hlcixcclxuICAgICAgICBzdWJqZWN0OiBpc1RlYWNoZXIgPyAocGVyc29uSW5mbz8uc3ViamVjdCB8fCBwZXJzb25JbmZvPy5zdWJqZWN0cyB8fCBwZXJzb25JbmZvPy5zdWJqZWN0X3RhdWdodCB8fCAnTi9BJykgOiBudWxsLFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFNjYW4gc2F2ZWQgc3VjY2Vzc2Z1bGx5IScsIHtcclxuICAgICAgICBpZDogbmV3UmVjb3JkLmlkLFxyXG4gICAgICAgIHN0dWRlbnQ6IGZvcm1hdHRlZFJlY29yZC5zdHVkZW50TmFtZSxcclxuICAgICAgICBzY2FuVHlwZTogc2NhblR5cGUsXHJcbiAgICAgICAgc2NhblRpbWU6IGZvcm1hdHRlZFJlY29yZC5zY2FuVGltZVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHJlY29yZDogZm9ybWF0dGVkUmVjb3JkLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBUaW1lICR7c2NhblR5cGUgPT09ICd0aW1laW4nID8gJ0luJyA6ICdPdXQnfSByZWNvcmRlZCBzdWNjZXNzZnVsbHlgLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgICAgaGVhZGVyczogcG9zdEhlYWRlcnMsXHJcbiAgICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgLy8gQ2F0Y2ggYW55IHVuaGFuZGxlZCBlcnJvcnMgdGhhdCBtaWdodCBjYXVzZSA1MDAgSFRNTCByZXNwb25zZSAoZm9yIFZlcmNlbClcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0NSSVRJQ0FMOiBVbmhhbmRsZWQgZXJyb3IgaW4gUE9TVCBoYW5kbGVyOicsIGVycm9yKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhY2s6JywgZXJyb3I/LnN0YWNrKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbmFtZTonLCBlcnJvcj8ubmFtZSlcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgZXJyb3I/Lm1lc3NhZ2UpXHJcbiAgICBcclxuICAgIC8vIEFsd2F5cyByZXR1cm4gSlNPTiwgbmV2ZXIgSFRNTCAod29ya3MgZm9yIGJvdGggbG9jYWxob3N0IGFuZCBWZXJjZWwpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3I/Lm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgcmVjb3JkczogW10sXHJcbiAgICAgIHdhcm5pbmc6ICdTZXJ2aWNlIGVycm9yIG9jY3VycmVkJyxcclxuICAgIH0sIHtcclxuICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzLFxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbi8vIFBVVCBlbmRwb2ludCB0byBlbmFibGUgdGltZW91dCBtb2RlIGZvciA1IHNlY29uZHNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgY29uc3QgcHV0SGVhZGVycyA9IHtcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBQVVQsIE9QVElPTlMnLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuICAgIGNvbnN0IHsgYWN0aW9uIH0gPSBib2R5XHJcblxyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2VuYWJsZS10aW1lb3V0Jykge1xyXG4gICAgICAvLyBFbmFibGUgdGltZW91dCBtb2RlIGZvciA1IHNlY29uZHNcclxuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxyXG4gICAgICBjb25zdCBleHBpcnkgPSBub3cgKyA1MDAwIC8vIDUgc2Vjb25kcyBmcm9tIG5vd1xyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBub3dcclxuICAgICAgXHJcbiAgICAgIHRpbWVvdXRNb2RlRXhwaXJ5LnNldCh0aW1lc3RhbXAsIGV4cGlyeSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCfij7AgVGltZW91dCBtb2RlIGVuYWJsZWQgZm9yIDUgc2Vjb25kcycpXHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdUaW1lb3V0IG1vZGUgZW5hYmxlZCBmb3IgNSBzZWNvbmRzJyxcclxuICAgICAgICAgIGV4cGlyZXNBdDogZXhwaXJ5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgICAgICBoZWFkZXJzOiBwdXRIZWFkZXJzLFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcclxuICAgICAgICAgIGhlYWRlcnM6IHB1dEhlYWRlcnMsXHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gUFVUIGhhbmRsZXI6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICBoZWFkZXJzOiBwdXRIZWFkZXJzLFxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTdXBhYmFzZUFkbWluIiwidGltZW91dE1vZGVFeHBpcnkiLCJNYXAiLCJjbGVhbnVwRXhwaXJlZFRpbWVvdXRzIiwibm93IiwiRGF0ZSIsInRpbWVzdGFtcCIsImV4cGlyeSIsImVudHJpZXMiLCJkZWxldGUiLCJpc1RpbWVvdXRNb2RlQWN0aXZlIiwidmFsdWVzIiwiT1BUSU9OUyIsInJlcXVlc3QiLCJzdGF0dXMiLCJoZWFkZXJzIiwiR0VUIiwiZGVmYXVsdEhlYWRlcnMiLCJ1cmwiLCJVUkwiLCJjb25zb2xlIiwibG9nIiwidG9TdHJpbmciLCJnZXQiLCJzZWFyY2hQYXJhbXMiLCJsaW1pdCIsInBhcnNlSW50Iiwic2luY2UiLCJzdXBhYmFzZUNsaWVudCIsImNsaWVudEVycm9yIiwiZXJyb3IiLCJqc29uIiwic3VjY2VzcyIsInJlY29yZHMiLCJ3YXJuaW5nIiwicHJvY2VzcyIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJkYXRhIiwicXVlcnlTdWNjZXNzIiwicnBjRGF0YSIsInJwY0Vycm9yIiwicnBjIiwicmVjb3JkX2xpbWl0Iiwic2luY2VfdGltZSIsImxlbmd0aCIsInJwY0V4Y2VwdGlvbiIsImRpcmVjdFF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ3QiLCJkaXJlY3RSZXN1bHQiLCJjb2RlIiwiaW5jbHVkZXMiLCJkaXJlY3RFcnJvciIsInF1ZXJ5RXJyb3IiLCJuYW1lIiwic3RhY2siLCJkZXRhaWxzIiwiaGludCIsInN0dWRlbnRJZHMiLCJTZXQiLCJtYXAiLCJyIiwic3R1ZGVudF9pZCIsImZpbHRlciIsIkJvb2xlYW4iLCJzdHVkZW50TWFwIiwidGVhY2hlck1hcCIsImFsbFN0dWRlbnRzIiwic3R1ZGVudHNFcnJvciIsImZvckVhY2giLCJzdHVkZW50Iiwic3R1ZGVudElkU3RyIiwidHJpbSIsInN0dWRlbnROdW1iZXJTdHIiLCJzdHVkZW50X251bWJlciIsInN0dWRlbnRJZFV1aWQiLCJpZCIsImFsbFRlYWNoZXJzIiwidGVhY2hlcnNFcnJvciIsInRlYWNoZXIiLCJ0ZWFjaGVySWRTdHIiLCJ0ZWFjaGVyX2lkIiwidGVhY2hlckVtYWlsIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsImZldGNoRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJzbGljZSIsInNjYW5fdGltZSIsImNyZWF0ZWRfYXQiLCJmb3JtYXR0ZWRSZWNvcmRzIiwicmVjb3JkIiwic2NhblR5cGUiLCJ0aW1lX2luIiwidGltZV9vdXQiLCJzY2FuX3R5cGUiLCJ0eXBlIiwiaXNUZWFjaGVyIiwicm9sZSIsInVzZXJfdHlwZSIsInBlcnNvbiIsInN0dWRlbnRJZCIsInN0dWRlbnROYW1lIiwiZmlyc3RfbmFtZSIsImZpcnN0TmFtZSIsImxhc3RfbmFtZSIsImxhc3ROYW1lIiwiZ3JhZGVMZXZlbCIsImdyYWRlX2xldmVsIiwic2VjdGlvbiIsInNjYW5UaW1lIiwicmZpZENhcmQiLCJyZmlkX2NhcmQiLCJzdHVkZW50UGhvdG8iLCJwaG90b191cmwiLCJwcm9maWxlX3BpY3R1cmUiLCJwaWN0dXJlIiwidGltZUluIiwidGltZU91dCIsInN1YmplY3QiLCJzdWJqZWN0cyIsInN1YmplY3RfdGF1Z2h0IiwiY291bnQiLCJqc29uRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiUE9TVCIsInBvc3RIZWFkZXJzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdWJzdHJpbmciLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic2NhbkRhdGEiLCJ0b2RheSIsInNldEhvdXJzIiwidG9kYXlTdGFydCIsInRvSVNPU3RyaW5nIiwidG9kYXlFbmQiLCJ0b2RheUVuZElTTyIsInJmaWROb3JtYWxpemVkIiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwicmZpZE5vTGVhZGluZ1plcm9zIiwic2VhcmNoZWRSZmlkIiwibWF0Y2hlZFRlYWNoZXIiLCJ0ZWFjaGVycyIsInJmaWQxIiwicmZpZDIiLCJyZmlkMyIsInJmaWRfdGFnIiwicmZpZDQiLCJyZmlkVGFnIiwic3R1ZGVudHMiLCJtYXRjaGVkU3R1ZGVudCIsInRvZGF5UmVjb3JkcyIsImNoZWNrRXJyb3IiLCJhbGxUb2RheVJlY29yZHMiLCJndGUiLCJsdGUiLCJySWQiLCJzSWQiLCJjdXJyZW50VGltZSIsInRpbWVvdXRNb2RlQWN0aXZlIiwidGltZUluUmVjb3JkIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsImF0dGVuZGFuY2VSZWNvcmQiLCJyZmlkVmFsdWUiLCJuZXdSZWNvcmQiLCJpbnNlcnRFcnJvciIsImluc2VydCIsInNpbmdsZSIsInBlcnNvbkluZm8iLCJmaW5kIiwic051bSIsInNVdWlkIiwicGVyc29uSWRTdHIiLCJ0SWQiLCJ0VXVpZCIsInRFbWFpbCIsImZvcm1hdHRlZFJlY29yZCIsIlBVVCIsInB1dEhlYWRlcnMiLCJib2R5IiwiYWN0aW9uIiwic2V0IiwiZXhwaXJlc0F0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/attendance-live/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseAdmin.ts":
/*!******************************!*\
  !*** ./lib/supabaseAdmin.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseAdmin: () => (/* binding */ getSupabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/.pnpm/@supabase+supabase-js@2.78.0/node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://ulntyefamkxkbynrugop.supabase.co\";\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nfunction getSupabaseAdmin() {\n    if (!supabaseUrl || !serviceRoleKey) {\n        throw new Error('Missing Supabase admin env. Set NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY (server-only).');\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VBZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RTtBQUV6RSxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsaUJBQWlCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUVyRCxTQUFTQztJQUNkLElBQUksQ0FBQ04sZUFBZSxDQUFDSSxnQkFBZ0I7UUFDbkMsTUFBTSxJQUFJRyxNQUFNO0lBQ2xCO0lBRUEsT0FBT1IsbUVBQVlBLENBQUNDLGFBQXVCSSxnQkFBMEI7UUFDbkVJLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxceGFtcHBcXGh0ZG9jc1xcY2Fwc3RvbmVfTWFpblxcbGliXFxzdXBhYmFzZUFkbWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCwgdHlwZSBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXHJcbmNvbnN0IHNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQWRtaW4oKTogU3VwYWJhc2VDbGllbnQge1xyXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXNlcnZpY2VSb2xlS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgYWRtaW4gZW52LiBTZXQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFuZCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIChzZXJ2ZXItb25seSkuJylcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCBhcyBzdHJpbmcsIHNlcnZpY2VSb2xlS2V5IGFzIHN0cmluZywge1xyXG4gICAgYXV0aDoge1xyXG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG59XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImdldFN1cGFiYXNlQWRtaW4iLCJFcnJvciIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_xampp_htdocs_capstone_Main_app_api_admin_attendance_live_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/attendance-live/route.ts */ \"(rsc)/./app/api/admin/attendance-live/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/attendance-live/route\",\n        pathname: \"/api/admin/attendance-live\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/attendance-live/route\"\n    },\n    resolvedPagePath: \"C:\\\\xampp\\\\htdocs\\\\capstone_Main\\\\app\\\\api\\\\admin\\\\attendance-live\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_xampp_htdocs_capstone_Main_app_api_admin_attendance_live_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmF0dGVuZGFuY2UtbGl2ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZhdHRlbmRhbmNlLWxpdmUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRmF0dGVuZGFuY2UtbGl2ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNjYXBzdG9uZV9NYWluJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNjYXBzdG9uZV9NYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxceGFtcHBcXFxcaHRkb2NzXFxcXGNhcHN0b25lX01haW5cXFxcYXBwXFxcXGFwaVxcXFxhZG1pblxcXFxhdHRlbmRhbmNlLWxpdmVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vYXR0ZW5kYW5jZS1saXZlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxceGFtcHBcXFxcaHRkb2NzXFxcXGNhcHN0b25lX01haW5cXFxcYXBwXFxcXGFwaVxcXFxhZG1pblxcXFxhdHRlbmRhbmNlLWxpdmVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/@supabase+storage-js@2.78.0","vendor-chunks/@supabase+auth-js@2.78.0","vendor-chunks/@supabase+realtime-js@2.78.0","vendor-chunks/@supabase+postgrest-js@2.78.0","vendor-chunks/@supabase+supabase-js@2.78.0","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/@supabase+functions-js@2.78.0","vendor-chunks/tr46@0.0.3","vendor-chunks/tslib@2.8.1","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/@supabase+node-fetch@2.6.15"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();