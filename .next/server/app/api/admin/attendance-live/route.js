/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/attendance-live/route";
exports.ids = ["app/api/admin/attendance-live/route"];
exports.modules = {

/***/ "(rsc)/./app/api/admin/attendance-live/route.ts":
/*!************************************************!*\
  !*** ./app/api/admin/attendance-live/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseAdmin */ \"(rsc)/./lib/supabaseAdmin.ts\");\n\n\n// Enable CORS for ESP32 requests\nasync function OPTIONS(request) {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type'\n        }\n    });\n}\nasync function GET(request) {\n    // Debug: Log environment variables\n    console.log(\"=== ENVIRONMENT VARIABLES DEBUG ===\");\n    console.log(\"URL:\",  true ? \"SET\" : 0);\n    console.log(\"URL Value:\", \"https://ulntyefamkxkbynrugop.supabase.co\");\n    console.log(\"ANON:\",  true ? \"SET\" : 0);\n    console.log(\"ANON Key (first 20 chars):\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsbnR5ZWZhbWt4a2J5bnJ1Z29wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MjgwNDEsImV4cCI6MjA3NjIwNDA0MX0.TnL8jfBVJD8Z0N5rFl_KFhAku8zxiy2fFvztBDYHaWk\"?.substring(0, 20) || 0);\n    console.log(\"SERVICE:\", process.env.SUPABASE_SERVICE_ROLE_KEY ? \"SET\" : \"MISSING\");\n    console.log(\"SERVICE Key (first 20 chars):\", process.env.SUPABASE_SERVICE_ROLE_KEY?.substring(0, 20) || \"MISSING\");\n    console.log(\"===================================\");\n    // Set default headers for all responses\n    const defaultHeaders = {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n    };\n    try {\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get('limit') || '50');\n        const since = searchParams.get('since') // Optional: get records since this timestamp\n        ;\n        // Use admin client to avoid RLS UUID/TEXT comparison errors\n        let supabaseClient;\n        try {\n            supabaseClient = (0,_lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdmin)();\n        } catch (clientError) {\n            console.error('Failed to get Supabase admin client:', clientError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Database client initialization failed',\n                error:  true ? clientError?.message : 0\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        if (!supabaseClient) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Database client not available'\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        // Fetch recent attendance records\n        // Don't use join to avoid foreign key issues - fetch students separately\n        let data = [];\n        let error = null;\n        try {\n            console.log('Attempting to fetch attendance records...');\n            console.log('Limit:', limit);\n            console.log('Since:', since);\n            // Try multiple methods to fetch records, handling PGRST200 errors gracefully\n            let querySuccess = false;\n            // Method 1: Try RPC function (bypasses PostgREST completely)\n            try {\n                console.log('Method 1: Trying RPC function...');\n                const { data: rpcData, error: rpcError } = await supabaseClient.rpc('get_attendance_records', {\n                    record_limit: limit,\n                    since_time: since || null\n                });\n                if (!rpcError && rpcData) {\n                    data = rpcData;\n                    error = null;\n                    querySuccess = true;\n                    console.log('✓ RPC query successful, records:', data.length);\n                } else {\n                    console.log('✗ RPC failed:', rpcError?.message || 'RPC function not found');\n                }\n            } catch (rpcException) {\n                console.log('✗ RPC exception:', rpcException.message);\n            }\n            // Method 2: If RPC failed, try direct query with minimal columns\n            if (!querySuccess) {\n                try {\n                    console.log('Method 2: Trying direct query with minimal columns...');\n                    let directQuery = supabaseClient.from('attendance_records').select('id, scan_time, student_id') // Minimal columns to avoid relationship checks\n                    .order('scan_time', {\n                        ascending: false\n                    }).limit(limit);\n                    if (since) {\n                        directQuery = directQuery.gt('scan_time', since);\n                    }\n                    const directResult = await directQuery;\n                    if (!directResult.error && directResult.data) {\n                        data = directResult.data || [];\n                        error = null;\n                        querySuccess = true;\n                        console.log('✓ Direct query (minimal) successful, records:', data.length);\n                    } else {\n                        // Check if it's a PGRST200 error - if so, just return empty\n                        if (directResult.error?.code === 'PGRST200' || directResult.error?.message?.includes('relationship') || directResult.error?.message?.includes('Could not find a relationship')) {\n                            console.log('⚠ PostgREST relationship error - returning empty records (this is OK)');\n                            data = [];\n                            error = null;\n                            querySuccess = true // Treat as success with empty data\n                            ;\n                        } else {\n                            throw directResult.error;\n                        }\n                    }\n                } catch (directError) {\n                    // If it's a relationship error, return empty records\n                    if (directError.code === 'PGRST200' || directError.message?.includes('relationship') || directError.message?.includes('Could not find a relationship')) {\n                        console.log('⚠ PostgREST relationship error in catch - returning empty records');\n                        data = [];\n                        error = null;\n                        querySuccess = true;\n                    } else {\n                        console.error('✗ Direct query failed:', directError);\n                        // Return empty records anyway\n                        data = [];\n                        error = null;\n                        querySuccess = true;\n                    }\n                }\n            }\n            // If we still don't have success, return empty records\n            if (!querySuccess) {\n                console.log('⚠ All query methods failed - returning empty records');\n                data = [];\n                error = null;\n            }\n        } catch (queryError) {\n            console.error('Query execution exception:', queryError);\n            console.error('Exception name:', queryError.name);\n            console.error('Exception message:', queryError.message);\n            console.error('Exception stack:', queryError.stack);\n            error = queryError;\n        }\n        if (error) {\n            console.error('Database error:', error);\n            console.error('Error code:', error.code);\n            console.error('Error message:', error.message);\n            console.error('Error details:', error.details);\n            console.error('Error hint:', error.hint);\n            // Return empty records instead of failing completely\n            // This allows the frontend to still work even if there's a database issue\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Unable to fetch attendance records from database',\n                error:  true ? error.message : 0,\n                details:  true ? {\n                    code: error.code,\n                    message: error.message,\n                    details: error.details,\n                    hint: error.hint\n                } : 0\n            }, {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Fetch student and teacher information for all records\n        const studentIds = [\n            ...new Set((data || []).map((r)=>r.student_id).filter(Boolean))\n        ];\n        const studentMap = {};\n        const teacherMap = {};\n        if (studentIds.length > 0) {\n            try {\n                // Fetch all students\n                const { data: allStudents, error: studentsError } = await supabaseClient.from('students').select('*').limit(1000);\n                if (!studentsError && allStudents) {\n                    allStudents.forEach((student)=>{\n                        const studentIdStr = (student.student_id || '').toString().trim();\n                        const studentNumberStr = (student.student_number || '').toString().trim();\n                        const studentIdUuid = (student.id || '').toString().trim();\n                        if (studentIdStr) studentMap[studentIdStr] = student;\n                        if (studentNumberStr) studentMap[studentNumberStr] = student;\n                        if (studentIdUuid) studentMap[studentIdUuid] = student;\n                    });\n                }\n                // Also fetch teachers\n                const { data: allTeachers, error: teachersError } = await supabaseClient.from('teachers').select('*').limit(1000);\n                if (!teachersError && allTeachers) {\n                    allTeachers.forEach((teacher)=>{\n                        const teacherIdStr = (teacher.teacher_id || teacher.id || '').toString().trim();\n                        const teacherEmail = (teacher.email || '').toString().trim().toLowerCase();\n                        if (teacherIdStr) teacherMap[teacherIdStr] = teacher;\n                        if (teacherEmail) teacherMap[teacherEmail] = teacher;\n                    });\n                }\n            } catch (fetchError) {\n                console.error('Error fetching students/teachers:', fetchError);\n            // Continue without info\n            }\n        }\n        // If we have no data, return empty array\n        if (!data || data.length === 0) {\n            console.log('No attendance records found');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: []\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n        // Format the response\n        const formattedRecords = (data || []).map((record)=>{\n            // Determine scan type from database fields\n            let scanType = null;\n            if (record.time_in && record.scan_time === record.time_in) {\n                scanType = 'timein';\n            } else if (record.time_out && record.scan_time === record.time_out) {\n                scanType = 'timeout';\n            } else if (record.scan_type) {\n                scanType = record.scan_type.toLowerCase() === 'time_in' || record.scan_type.toLowerCase() === 'timein' ? 'timein' : record.scan_type.toLowerCase() === 'time_out' || record.scan_type.toLowerCase() === 'timeout' ? 'timeout' : null;\n            } else if (record.type) {\n                scanType = record.type.toLowerCase() === 'time_in' || record.type.toLowerCase() === 'timein' ? 'timein' : record.type.toLowerCase() === 'time_out' || record.type.toLowerCase() === 'timeout' ? 'timeout' : null;\n            }\n            // Get student or teacher info from maps\n            const student = studentMap[record.student_id] || null;\n            const teacher = teacherMap[record.student_id] || null;\n            // Determine if this is a teacher or student\n            const isTeacher = !!teacher || student && (student.role === 'teacher' || student.user_type === 'teacher' || student.teacher_id || !student.student_id && !student.student_number);\n            const person = teacher || student;\n            return {\n                id: record.id,\n                studentId: record.student_id,\n                studentName: person ? `${person.first_name || person.firstName || ''} ${person.last_name || person.lastName || ''}`.trim() || person.name || 'Unknown' : 'Unknown',\n                gradeLevel: isTeacher ? null : person?.grade_level || person?.gradeLevel || 'N/A',\n                section: isTeacher ? null : person?.section || 'N/A',\n                scanTime: record.scan_time || record.created_at,\n                status: record.status || 'Present',\n                rfidCard: record.rfid_card || 'N/A',\n                studentPhoto: person?.photo_url || person?.profile_picture || person?.picture || null,\n                scanType: scanType,\n                timeIn: record.time_in || null,\n                timeOut: record.time_out || null,\n                isTeacher: isTeacher || false,\n                subject: isTeacher ? person?.subject || person?.subjects || person?.subject_taught || 'N/A' : null,\n                role: person?.role || null\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            records: formattedRecords,\n            count: formattedRecords.length\n        });\n    } catch (error) {\n        console.error('Attendance records API error:', error);\n        console.error('Error stack:', error?.stack);\n        console.error('Error name:', error?.name);\n        console.error('Error message:', error?.message);\n        // Always return JSON, never let Next.js return HTML error page\n        try {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                records: [],\n                warning: 'Unable to fetch attendance records',\n                error: error?.message || 'Internal server error',\n                details:  true ? {\n                    stack: error?.stack,\n                    name: error?.name,\n                    message: error?.message\n                } : 0\n            }, {\n                status: 200,\n                headers: defaultHeaders\n            });\n        } catch (jsonError) {\n            // Even if JSON creation fails, return a simple text response as JSON\n            console.error('Failed to create JSON response:', jsonError);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                success: true,\n                records: [],\n                warning: 'Service temporarily unavailable'\n            }), {\n                status: 200,\n                headers: defaultHeaders\n            });\n        }\n    }\n}\nasync function POST(request) {\n    // Debug: Log environment variables\n    console.log(\"=== POST: ENVIRONMENT VARIABLES DEBUG ===\");\n    console.log(\"URL:\",  true ? \"SET\" : 0);\n    console.log(\"URL Value:\", \"https://ulntyefamkxkbynrugop.supabase.co\");\n    console.log(\"ANON:\",  true ? \"SET\" : 0);\n    console.log(\"ANON Key (first 20 chars):\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsbnR5ZWZhbWt4a2J5bnJ1Z29wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MjgwNDEsImV4cCI6MjA3NjIwNDA0MX0.TnL8jfBVJD8Z0N5rFl_KFhAku8zxiy2fFvztBDYHaWk\"?.substring(0, 20) || 0);\n    console.log(\"SERVICE:\", process.env.SUPABASE_SERVICE_ROLE_KEY ? \"SET\" : \"MISSING\");\n    console.log(\"SERVICE Key (first 20 chars):\", process.env.SUPABASE_SERVICE_ROLE_KEY?.substring(0, 20) || \"MISSING\");\n    console.log(\"==========================================\");\n    try {\n        // Handle CORS preflight\n        const headers = {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type'\n        };\n        const scanData = await request.json();\n        // Validate required fields\n        if (!scanData.studentId && !scanData.rfidCard) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Student ID or RFID Card is required'\n            }, {\n                status: 400,\n                headers: {\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Use admin client for inserts to bypass RLS policies\n        // This avoids UUID/TEXT comparison errors in RLS policies\n        const supabaseClient = (0,_lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdmin)();\n        if (!supabaseClient) {\n            console.error('Supabase client not initialized');\n            if (true) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: 'Scan recorded (dev mode - not saved to database)'\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Database service not configured. Please check your environment variables.'\n            }, {\n                status: 500\n            });\n        }\n        // Get current date (start of day) for checking existing records\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        const todayStart = today.toISOString();\n        const todayEnd = new Date(today);\n        todayEnd.setHours(23, 59, 59, 999);\n        const todayEndISO = todayEnd.toISOString();\n        // Find student by RFID card or student ID\n        let studentId = scanData.studentId;\n        if (!studentId && scanData.rfidCard) {\n            // Normalize RFID card - remove spaces, convert to uppercase, remove leading zeros\n            let rfidNormalized = scanData.rfidCard.toString().trim().toUpperCase().replace(/\\s+/g, '');\n            // Also create version without leading zeros for matching\n            const rfidNoLeadingZeros = rfidNormalized.replace(/^0+/, '');\n            console.log(`Searching for student with RFID: ${rfidNormalized} (also trying: ${rfidNoLeadingZeros})`);\n            // Fetch all students and filter in memory to avoid column errors\n            const { data: allStudents, error: fetchError } = await supabaseClient.from('students').select('*').limit(1000);\n            if (fetchError) {\n                console.error('Error fetching students:', fetchError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: `Database error: ${fetchError.message}`,\n                    searchedRfid: rfidNormalized\n                }, {\n                    status: 500,\n                    headers: {\n                        'Access-Control-Allow-Origin': '*',\n                        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                        'Access-Control-Allow-Headers': 'Content-Type'\n                    }\n                });\n            }\n            // Filter students in memory by RFID (check all possible column names)\n            // Priority: rfid_card (what ESP32 expects) > rfidCard > rfid_tag > rfidTag\n            const students = (allStudents || []).filter((student)=>{\n                const rfid1 = (student.rfid_card || '').toString().trim().toUpperCase() // Primary - ESP32 expects this\n                ;\n                const rfid2 = (student.rfidCard || '').toString().trim().toUpperCase();\n                const rfid3 = (student.rfid_tag || '').toString().trim().toUpperCase();\n                const rfid4 = (student.rfidTag || '').toString().trim().toUpperCase();\n                // Check exact matches first, then partial\n                return rfid1 === rfidNormalized || rfid1 === rfidNoLeadingZeros || rfid2 === rfidNormalized || rfid2 === rfidNoLeadingZeros || rfid3 === rfidNormalized || rfid3 === rfidNoLeadingZeros || rfid4 === rfidNormalized || rfid4 === rfidNoLeadingZeros || rfid1.includes(rfidNormalized) || rfid2.includes(rfidNormalized) || rfid3.includes(rfidNormalized) || rfid4.includes(rfidNormalized);\n            });\n            if (!students || students.length === 0) {\n                console.log(`No student found with RFID: ${rfidNormalized}`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: `Student not found for RFID: ${rfidNormalized}. Please assign this RFID card to a student in the admin panel.`,\n                    searchedRfid: rfidNormalized,\n                    message: `RFID ${rfidNormalized} not assigned to any student`\n                }, {\n                    status: 404,\n                    headers: {\n                        'Access-Control-Allow-Origin': '*',\n                        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                        'Access-Control-Allow-Headers': 'Content-Type'\n                    }\n                });\n            }\n            // Use first match\n            const matchedStudent = students[0];\n            console.log(`Found student: ${matchedStudent.first_name || matchedStudent.firstName || 'Unknown'} ${matchedStudent.last_name || matchedStudent.lastName || ''}`);\n            // Use student_number or student_id (TEXT) - NOT the UUID id\n            // attendance_records.student_id is TEXT type, so we store TEXT values\n            studentId = matchedStudent.student_number || matchedStudent.student_id || matchedStudent.studentId || matchedStudent.id?.toString();\n        }\n        // Check if student has already scanned in today\n        // student_id is now TEXT type, so we can query directly\n        // But we need to cast to text to avoid UUID comparison errors\n        let todayRecords = [];\n        let checkError = null;\n        // Fetch all records for today, then filter in memory to avoid type mismatch\n        const { data: allTodayRecords, error: fetchError } = await supabaseClient.from('attendance_records').select('id, scan_type, scan_time, time_in, time_out, student_id').gte('scan_time', todayStart).lte('scan_time', todayEndISO).order('scan_time', {\n            ascending: true\n        });\n        if (fetchError) {\n            checkError = fetchError;\n            console.error('Error fetching today records:', fetchError);\n        } else if (allTodayRecords) {\n            // Filter in memory by student_id (text match) to avoid UUID/TEXT comparison issues\n            todayRecords = allTodayRecords.filter((r)=>{\n                const rId = (r.student_id || '').toString().trim();\n                const sId = (studentId || '').toString().trim();\n                return rId === sId || rId === studentId || sId === r.student_id;\n            });\n        }\n        if (checkError) {\n            console.error('Error checking existing records:', checkError);\n        }\n        // Determine scan type\n        let scanType = 'timein';\n        let timeIn = null;\n        let timeOut = null;\n        const currentTime = new Date().toISOString();\n        if (todayRecords && todayRecords.length > 0) {\n            // Check if there's already a time in for today\n            const hasTimeIn = todayRecords.some((r)=>r.scan_type === 'timein' || r.scan_type === 'time_in' || r.time_in && r.scan_time === r.time_in);\n            if (hasTimeIn) {\n                // This is a time out\n                scanType = 'timeout';\n                timeOut = currentTime;\n                // Find the time in record\n                const timeInRecord = todayRecords.find((r)=>r.scan_type === 'timein' || r.scan_type === 'time_in' || r.time_in && r.scan_time === r.time_in);\n                if (timeInRecord) {\n                    timeIn = timeInRecord.time_in || timeInRecord.scan_time;\n                }\n            } else {\n                // This is a time in\n                scanType = 'timein';\n                timeIn = currentTime;\n            }\n        } else {\n            // No records today, this is a time in\n            scanType = 'timein';\n            timeIn = currentTime;\n        }\n        // Insert the attendance record\n        // Build insert object with all required fields\n        const attendanceRecord = {\n            student_id: studentId\n        };\n        // Add RFID fields - set both rfid_card and rfid_tag to avoid NOT NULL constraint errors\n        const rfidValue = scanData.rfidCard || '';\n        if (rfidValue) {\n            attendanceRecord.rfid_card = rfidValue;\n            attendanceRecord.rfid_tag = rfidValue // Some schemas use rfid_tag instead\n            ;\n        } else {\n            // If no RFID provided, set empty string to avoid NOT NULL constraint\n            attendanceRecord.rfid_card = '';\n            attendanceRecord.rfid_tag = '';\n        }\n        // Set device_id - if column is UUID type, we can't use text, so set to null\n        // If column is TEXT type, we can use a device identifier\n        // For now, don't set it to avoid UUID type errors\n        // attendanceRecord.device_id = scanData.deviceId || null\n        attendanceRecord.scan_time = currentTime;\n        attendanceRecord.scan_type = scanType;\n        attendanceRecord.time_in = timeIn;\n        attendanceRecord.time_out = timeOut;\n        attendanceRecord.status = scanType === 'timein' ? 'Present' : 'Present';\n        attendanceRecord.created_at = currentTime;\n        // Optional type field for compatibility\n        attendanceRecord.type = scanType;\n        // Insert the attendance record (without join to avoid foreign key issues)\n        const { data: newRecord, error: insertError } = await supabaseClient.from('attendance_records').insert([\n            attendanceRecord\n        ]).select('*').single();\n        if (insertError) {\n            console.error('Database error:', insertError);\n            // In development, return success even if table doesn't exist\n            if (true) {\n                console.log('Scan data (dev mode):', {\n                    studentId,\n                    scanType,\n                    timeIn,\n                    timeOut\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: 'Scan recorded (dev mode - not saved to database)',\n                    scanType,\n                    timeIn,\n                    timeOut\n                }, {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*',\n                        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                        'Access-Control-Allow-Headers': 'Content-Type'\n                    }\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: insertError.message,\n                hint: 'Please check that all required columns exist in attendance_records table. Run create-attendance-table.sql in Supabase.'\n            }, {\n                status: 500,\n                headers: {\n                    'Access-Control-Allow-Origin': '*',\n                    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                    'Access-Control-Allow-Headers': 'Content-Type'\n                }\n            });\n        }\n        // Fetch student information separately to avoid join issues\n        // Fetch all students and filter in memory to avoid UUID/TEXT comparison errors\n        let studentInfo = null;\n        if (studentId) {\n            // Fetch all students and filter in memory\n            const { data: allStudents } = await supabaseClient.from('students').select('*').limit(1000);\n            if (allStudents) {\n                // Find matching student by comparing as strings\n                const studentIdStr = (studentId || '').toString().trim();\n                studentInfo = allStudents.find((student)=>{\n                    const sId = (student.student_id || '').toString().trim();\n                    const sNum = (student.student_number || '').toString().trim();\n                    const sUuid = (student.id || '').toString().trim();\n                    return sId === studentIdStr || sNum === studentIdStr || sUuid === studentIdStr;\n                }) || null;\n            }\n        }\n        // Format the response\n        const formattedRecord = {\n            id: newRecord.id,\n            studentId: newRecord.student_id || studentId,\n            studentName: studentInfo ? `${studentInfo.first_name || studentInfo.firstName || ''} ${studentInfo.last_name || studentInfo.lastName || ''}`.trim() || studentInfo.name || 'Unknown Student' : 'Unknown Student',\n            gradeLevel: studentInfo?.grade_level || studentInfo?.gradeLevel || 'N/A',\n            section: studentInfo?.section || 'N/A',\n            scanTime: newRecord.scan_time || newRecord.created_at,\n            status: newRecord.status || 'Present',\n            rfidCard: newRecord.rfid_card || scanData.rfidCard || 'N/A',\n            studentPhoto: studentInfo?.photo_url || studentInfo?.profile_picture || studentInfo?.picture || null,\n            scanType: scanType,\n            timeIn: newRecord.time_in || null,\n            timeOut: newRecord.time_out || null\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            record: formattedRecord,\n            message: `Time ${scanType === 'timein' ? 'In' : 'Out'} recorded successfully`\n        }, {\n            headers: {\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                'Access-Control-Allow-Headers': 'Content-Type'\n            }\n        });\n    } catch (error) {\n        console.error('Record attendance API error:', error);\n        console.error('Error stack:', error?.stack);\n        console.error('Error details:', JSON.stringify(error, null, 2));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error?.message || 'Internal server error',\n            details:  true ? error?.stack : 0\n        }, {\n            status: 500,\n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                'Access-Control-Allow-Headers': 'Content-Type'\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwQztBQUVZO0FBRXRELGlDQUFpQztBQUMxQixlQUFlRSxRQUFRQyxPQUFnQjtJQUM1QyxPQUFPLElBQUlILHFEQUFZQSxDQUFDLE1BQU07UUFDNUJJLFFBQVE7UUFDUkMsU0FBUztZQUNQLCtCQUErQjtZQUMvQixnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1FBQ2xDO0lBQ0Y7QUFDRjtBQUVPLGVBQWVDLElBQUlILE9BQWdCO0lBQ3hDLG1DQUFtQztJQUNuQ0ksUUFBUUMsR0FBRyxDQUFDO0lBQ1pELFFBQVFDLEdBQUcsQ0FBQyxRQUFRQyxLQUFvQyxHQUFHLFFBQVEsQ0FBUztJQUM1RUYsUUFBUUMsR0FBRyxDQUFDLGNBQWNDLDBDQUFvQztJQUM5REYsUUFBUUMsR0FBRyxDQUFDLFNBQVNDLEtBQXlDLEdBQUcsUUFBUSxDQUFTO0lBQ2xGRixRQUFRQyxHQUFHLENBQUMsOEJBQThCQyxrTkFBeUMsRUFBRUksVUFBVSxHQUFHLE9BQU8sQ0FBUztJQUNsSE4sUUFBUUMsR0FBRyxDQUFDLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0kseUJBQXlCLEdBQUcsUUFBUTtJQUN4RVAsUUFBUUMsR0FBRyxDQUFDLGlDQUFpQ0MsUUFBUUMsR0FBRyxDQUFDSSx5QkFBeUIsRUFBRUQsVUFBVSxHQUFHLE9BQU87SUFDeEdOLFFBQVFDLEdBQUcsQ0FBQztJQUVaLHdDQUF3QztJQUN4QyxNQUFNTyxpQkFBaUI7UUFDckIsZ0JBQWdCO1FBQ2hCLCtCQUErQjtRQUMvQixnQ0FBZ0M7UUFDaEMsZ0NBQWdDO0lBQ2xDO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSWQsUUFBUWUsR0FBRztRQUM1QyxNQUFNQyxRQUFRQyxTQUFTSixhQUFhSyxHQUFHLENBQUMsWUFBWTtRQUNwRCxNQUFNQyxRQUFRTixhQUFhSyxHQUFHLENBQUMs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U0FBUzdDLEtBQXNDLEdBQUdnQixPQUFPNEIsUUFBUXRCLENBQVNBO1FBQzVFLEdBQ0E7WUFDRTNCLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLCtCQUErQjtnQkFDL0IsZ0NBQWdDO2dCQUNoQyxnQ0FBZ0M7WUFDbEM7UUFDRjtJQUVKO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFx4YW1wcFxcaHRkb2NzXFxjYXBzdG9uZV9NYWluXFxhcHBcXGFwaVxcYWRtaW5cXGF0dGVuZGFuY2UtbGl2ZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9saWIvc3VwYWJhc2VDbGllbnQnXHJcbmltcG9ydCB7IGdldFN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZUFkbWluJ1xyXG5cclxuLy8gRW5hYmxlIENPUlMgZm9yIEVTUDMyIHJlcXVlc3RzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBPUFRJT05TKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XHJcbiAgICBzdGF0dXM6IDIwMCxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgIH0sXHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgLy8gRGVidWc6IExvZyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcclxuICBjb25zb2xlLmxvZyhcIj09PSBFTlZJUk9OTUVOVCBWQVJJQUJMRVMgREVCVUcgPT09XCIpXHJcbiAgY29uc29sZS5sb2coXCJVUkw6XCIsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA/IFwiU0VUXCIgOiBcIk1JU1NJTkdcIilcclxuICBjb25zb2xlLmxvZyhcIlVSTCBWYWx1ZTpcIiwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMKVxyXG4gIGNvbnNvbGUubG9nKFwiQU5PTjpcIiwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPyBcIlNFVFwiIDogXCJNSVNTSU5HXCIpXHJcbiAgY29uc29sZS5sb2coXCJBTk9OIEtleSAoZmlyc3QgMjAgY2hhcnMpOlwiLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWT8uc3Vic3RyaW5nKDAsIDIwKSB8fCBcIk1JU1NJTkdcIilcclxuICBjb25zb2xlLmxvZyhcIlNFUlZJQ0U6XCIsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgPyBcIlNFVFwiIDogXCJNSVNTSU5HXCIpXHJcbiAgY29uc29sZS5sb2coXCJTRVJWSUNFIEtleSAoZmlyc3QgMjAgY2hhcnMpOlwiLCBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZPy5zdWJzdHJpbmcoMCwgMjApIHx8IFwiTUlTU0lOR1wiKVxyXG4gIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIilcclxuXHJcbiAgLy8gU2V0IGRlZmF1bHQgaGVhZGVycyBmb3IgYWxsIHJlc3BvbnNlc1xyXG4gIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0ge1xyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcclxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnNTAnKVxyXG4gICAgY29uc3Qgc2luY2UgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzaW5jZScpIC8vIE9wdGlvbmFsOiBnZXQgcmVjb3JkcyBzaW5jZSB0aGlzIHRpbWVzdGFtcFxyXG5cclxuICAgIC8vIFVzZSBhZG1pbiBjbGllbnQgdG8gYXZvaWQgUkxTIFVVSUQvVEVYVCBjb21wYXJpc29uIGVycm9yc1xyXG4gICAgbGV0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICB0cnkge1xyXG4gICAgICBzdXBhYmFzZUNsaWVudCA9IGdldFN1cGFiYXNlQWRtaW4oKVxyXG4gICAgfSBjYXRjaCAoY2xpZW50RXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IFN1cGFiYXNlIGFkbWluIGNsaWVudDonLCBjbGllbnRFcnJvcilcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLCAvLyBSZXR1cm4gc3VjY2VzcyB3aXRoIGVtcHR5IHJlY29yZHNcclxuICAgICAgICByZWNvcmRzOiBbXSxcclxuICAgICAgICB3YXJuaW5nOiAnRGF0YWJhc2UgY2xpZW50IGluaXRpYWxpemF0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gY2xpZW50RXJyb3I/Lm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sIHsgXHJcbiAgICAgICAgc3RhdHVzOiAyMDAsIC8vIEFsd2F5cyByZXR1cm4gMjAwLCBuZXZlciA1MDBcclxuICAgICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyxcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXN1cGFiYXNlQ2xpZW50KSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgLy8gUmV0dXJuIHN1Y2Nlc3Mgd2l0aCBlbXB0eSByZWNvcmRzXHJcbiAgICAgICAgcmVjb3JkczogW10sXHJcbiAgICAgICAgd2FybmluZzogJ0RhdGFiYXNlIGNsaWVudCBub3QgYXZhaWxhYmxlJyxcclxuICAgICAgfSwgeyBcclxuICAgICAgICBzdGF0dXM6IDIwMCwgLy8gQWx3YXlzIHJldHVybiAyMDAsIG5ldmVyIDUwMFxyXG4gICAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIHJlY2VudCBhdHRlbmRhbmNlIHJlY29yZHNcclxuICAgIC8vIERvbid0IHVzZSBqb2luIHRvIGF2b2lkIGZvcmVpZ24ga2V5IGlzc3VlcyAtIGZldGNoIHN0dWRlbnRzIHNlcGFyYXRlbHlcclxuICAgIGxldCBkYXRhOiBhbnlbXSA9IFtdXHJcbiAgICBsZXQgZXJyb3I6IGFueSA9IG51bGxcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gZmV0Y2ggYXR0ZW5kYW5jZSByZWNvcmRzLi4uJylcclxuICAgICAgY29uc29sZS5sb2coJ0xpbWl0OicsIGxpbWl0KVxyXG4gICAgICBjb25zb2xlLmxvZygnU2luY2U6Jywgc2luY2UpXHJcbiAgICAgIFxyXG4gICAgICAvLyBUcnkgbXVsdGlwbGUgbWV0aG9kcyB0byBmZXRjaCByZWNvcmRzLCBoYW5kbGluZyBQR1JTVDIwMCBlcnJvcnMgZ3JhY2VmdWxseVxyXG4gICAgICBsZXQgcXVlcnlTdWNjZXNzID0gZmFsc2VcclxuICAgICAgXHJcbiAgICAgIC8vIE1ldGhvZCAxOiBUcnkgUlBDIGZ1bmN0aW9uIChieXBhc3NlcyBQb3N0Z1JFU1QgY29tcGxldGVseSlcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWV0aG9kIDE6IFRyeWluZyBSUEMgZnVuY3Rpb24uLi4nKVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogcnBjRGF0YSwgZXJyb3I6IHJwY0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5ycGMoJ2dldF9hdHRlbmRhbmNlX3JlY29yZHMnLCB7XHJcbiAgICAgICAgICByZWNvcmRfbGltaXQ6IGxpbWl0LFxyXG4gICAgICAgICAgc2luY2VfdGltZTogc2luY2UgfHwgbnVsbFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFycGNFcnJvciAmJiBycGNEYXRhKSB7XHJcbiAgICAgICAgICBkYXRhID0gcnBjRGF0YSBhcyBhbnlbXVxyXG4gICAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyTIFJQQyBxdWVyeSBzdWNjZXNzZnVsLCByZWNvcmRzOicsIGRhdGEubGVuZ3RoKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyXIFJQQyBmYWlsZWQ6JywgcnBjRXJyb3I/Lm1lc3NhZ2UgfHwgJ1JQQyBmdW5jdGlvbiBub3QgZm91bmQnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAocnBjRXhjZXB0aW9uOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pyXIFJQQyBleGNlcHRpb246JywgcnBjRXhjZXB0aW9uLm1lc3NhZ2UpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIE1ldGhvZCAyOiBJZiBSUEMgZmFpbGVkLCB0cnkgZGlyZWN0IHF1ZXJ5IHdpdGggbWluaW1hbCBjb2x1bW5zXHJcbiAgICAgIGlmICghcXVlcnlTdWNjZXNzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXRob2QgMjogVHJ5aW5nIGRpcmVjdCBxdWVyeSB3aXRoIG1pbmltYWwgY29sdW1ucy4uLicpXHJcbiAgICAgICAgICBsZXQgZGlyZWN0UXVlcnkgPSBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgICAgICAuZnJvbSgnYXR0ZW5kYW5jZV9yZWNvcmRzJylcclxuICAgICAgICAgICAgLnNlbGVjdCgnaWQsIHNjYW5fdGltZSwgc3R1ZGVudF9pZCcpIC8vIE1pbmltYWwgY29sdW1ucyB0byBhdm9pZCByZWxhdGlvbnNoaXAgY2hlY2tzXHJcbiAgICAgICAgICAgIC5vcmRlcignc2Nhbl90aW1lJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKHNpbmNlKSB7XHJcbiAgICAgICAgICAgIGRpcmVjdFF1ZXJ5ID0gZGlyZWN0UXVlcnkuZ3QoJ3NjYW5fdGltZScsIHNpbmNlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBkaXJlY3RSZXN1bHQgPSBhd2FpdCBkaXJlY3RRdWVyeVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoIWRpcmVjdFJlc3VsdC5lcnJvciAmJiBkaXJlY3RSZXN1bHQuZGF0YSkge1xyXG4gICAgICAgICAgICBkYXRhID0gZGlyZWN0UmVzdWx0LmRhdGEgfHwgW11cclxuICAgICAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgICAgICAgIHF1ZXJ5U3VjY2VzcyA9IHRydWVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KckyBEaXJlY3QgcXVlcnkgKG1pbmltYWwpIHN1Y2Nlc3NmdWwsIHJlY29yZHM6JywgZGF0YS5sZW5ndGgpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgUEdSU1QyMDAgZXJyb3IgLSBpZiBzbywganVzdCByZXR1cm4gZW1wdHlcclxuICAgICAgICAgICAgaWYgKGRpcmVjdFJlc3VsdC5lcnJvcj8uY29kZSA9PT0gJ1BHUlNUMjAwJyB8fCBcclxuICAgICAgICAgICAgICAgIGRpcmVjdFJlc3VsdC5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3JlbGF0aW9uc2hpcCcpIHx8XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RSZXN1bHQuZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdDb3VsZCBub3QgZmluZCBhIHJlbGF0aW9uc2hpcCcpKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoCBQb3N0Z1JFU1QgcmVsYXRpb25zaGlwIGVycm9yIC0gcmV0dXJuaW5nIGVtcHR5IHJlY29yZHMgKHRoaXMgaXMgT0spJylcclxuICAgICAgICAgICAgICBkYXRhID0gW11cclxuICAgICAgICAgICAgICBlcnJvciA9IG51bGxcclxuICAgICAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlIC8vIFRyZWF0IGFzIHN1Y2Nlc3Mgd2l0aCBlbXB0eSBkYXRhXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgZGlyZWN0UmVzdWx0LmVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChkaXJlY3RFcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAvLyBJZiBpdCdzIGEgcmVsYXRpb25zaGlwIGVycm9yLCByZXR1cm4gZW1wdHkgcmVjb3Jkc1xyXG4gICAgICAgICAgaWYgKGRpcmVjdEVycm9yLmNvZGUgPT09ICdQR1JTVDIwMCcgfHwgXHJcbiAgICAgICAgICAgICAgZGlyZWN0RXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JlbGF0aW9uc2hpcCcpIHx8XHJcbiAgICAgICAgICAgICAgZGlyZWN0RXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0NvdWxkIG5vdCBmaW5kIGEgcmVsYXRpb25zaGlwJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoCBQb3N0Z1JFU1QgcmVsYXRpb25zaGlwIGVycm9yIGluIGNhdGNoIC0gcmV0dXJuaW5nIGVtcHR5IHJlY29yZHMnKVxyXG4gICAgICAgICAgICBkYXRhID0gW11cclxuICAgICAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgICAgICAgIHF1ZXJ5U3VjY2VzcyA9IHRydWVcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KclyBEaXJlY3QgcXVlcnkgZmFpbGVkOicsIGRpcmVjdEVycm9yKVxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZW1wdHkgcmVjb3JkcyBhbnl3YXlcclxuICAgICAgICAgICAgZGF0YSA9IFtdXHJcbiAgICAgICAgICAgIGVycm9yID0gbnVsbFxyXG4gICAgICAgICAgICBxdWVyeVN1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiB3ZSBzdGlsbCBkb24ndCBoYXZlIHN1Y2Nlc3MsIHJldHVybiBlbXB0eSByZWNvcmRzXHJcbiAgICAgIGlmICghcXVlcnlTdWNjZXNzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoCBBbGwgcXVlcnkgbWV0aG9kcyBmYWlsZWQgLSByZXR1cm5pbmcgZW1wdHkgcmVjb3JkcycpXHJcbiAgICAgICAgZGF0YSA9IFtdXHJcbiAgICAgICAgZXJyb3IgPSBudWxsXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKHF1ZXJ5RXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdRdWVyeSBleGVjdXRpb24gZXhjZXB0aW9uOicsIHF1ZXJ5RXJyb3IpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBuYW1lOicsIHF1ZXJ5RXJyb3IubmFtZSlcclxuICAgICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIG1lc3NhZ2U6JywgcXVlcnlFcnJvci5tZXNzYWdlKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gc3RhY2s6JywgcXVlcnlFcnJvci5zdGFjaylcclxuICAgICAgZXJyb3IgPSBxdWVyeUVycm9yXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycm9yKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb2RlOicsIGVycm9yLmNvZGUpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgZXJyb3IubWVzc2FnZSlcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5kZXRhaWxzKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoaW50OicsIGVycm9yLmhpbnQpXHJcbiAgICAgIFxyXG4gICAgICAvLyBSZXR1cm4gZW1wdHkgcmVjb3JkcyBpbnN0ZWFkIG9mIGZhaWxpbmcgY29tcGxldGVseVxyXG4gICAgICAvLyBUaGlzIGFsbG93cyB0aGUgZnJvbnRlbmQgdG8gc3RpbGwgd29yayBldmVuIGlmIHRoZXJlJ3MgYSBkYXRhYmFzZSBpc3N1ZVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIC8vIFJldHVybiBzdWNjZXNzIHdpdGggZW1wdHkgcmVjb3Jkc1xyXG4gICAgICAgIHJlY29yZHM6IFtdLFxyXG4gICAgICAgIHdhcm5pbmc6ICdVbmFibGUgdG8gZmV0Y2ggYXR0ZW5kYW5jZSByZWNvcmRzIGZyb20gZGF0YWJhc2UnLFxyXG4gICAgICAgIGVycm9yOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB7XHJcbiAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXHJcbiAgICAgICAgICBoaW50OiBlcnJvci5oaW50LFxyXG4gICAgICAgIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sIHsgXHJcbiAgICAgICAgc3RhdHVzOiAyMDAsIC8vIFJldHVybiAyMDAgd2l0aCBlbXB0eSByZWNvcmRzIGluc3RlYWQgb2YgNTAwXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIHN0dWRlbnQgYW5kIHRlYWNoZXIgaW5mb3JtYXRpb24gZm9yIGFsbCByZWNvcmRzXHJcbiAgICBjb25zdCBzdHVkZW50SWRzID0gWy4uLm5ldyBTZXQoKGRhdGEgfHwgW10pLm1hcCgocjogYW55KSA9PiByLnN0dWRlbnRfaWQpLmZpbHRlcihCb29sZWFuKSldXHJcbiAgICBjb25zdCBzdHVkZW50TWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cclxuICAgIGNvbnN0IHRlYWNoZXJNYXA6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxyXG4gICAgXHJcbiAgICBpZiAoc3R1ZGVudElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggYWxsIHN0dWRlbnRzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhbGxTdHVkZW50cywgZXJyb3I6IHN0dWRlbnRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgICAgICAuZnJvbSgnc3R1ZGVudHMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMTAwMClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXN0dWRlbnRzRXJyb3IgJiYgYWxsU3R1ZGVudHMpIHtcclxuICAgICAgICAgIGFsbFN0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdHVkZW50SWRTdHIgPSAoc3R1ZGVudC5zdHVkZW50X2lkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICBjb25zdCBzdHVkZW50TnVtYmVyU3RyID0gKHN0dWRlbnQuc3R1ZGVudF9udW1iZXIgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRJZFV1aWQgPSAoc3R1ZGVudC5pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChzdHVkZW50SWRTdHIpIHN0dWRlbnRNYXBbc3R1ZGVudElkU3RyXSA9IHN0dWRlbnRcclxuICAgICAgICAgICAgaWYgKHN0dWRlbnROdW1iZXJTdHIpIHN0dWRlbnRNYXBbc3R1ZGVudE51bWJlclN0cl0gPSBzdHVkZW50XHJcbiAgICAgICAgICAgIGlmIChzdHVkZW50SWRVdWlkKSBzdHVkZW50TWFwW3N0dWRlbnRJZFV1aWRdID0gc3R1ZGVudFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWxzbyBmZXRjaCB0ZWFjaGVyc1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWxsVGVhY2hlcnMsIGVycm9yOiB0ZWFjaGVyc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgICAgLmZyb20oJ3RlYWNoZXJzJylcclxuICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgLmxpbWl0KDEwMDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0ZWFjaGVyc0Vycm9yICYmIGFsbFRlYWNoZXJzKSB7XHJcbiAgICAgICAgICBhbGxUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVhY2hlcklkU3RyID0gKHRlYWNoZXIudGVhY2hlcl9pZCB8fCB0ZWFjaGVyLmlkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgICBjb25zdCB0ZWFjaGVyRW1haWwgPSAodGVhY2hlci5lbWFpbCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRlYWNoZXJJZFN0cikgdGVhY2hlck1hcFt0ZWFjaGVySWRTdHJdID0gdGVhY2hlclxyXG4gICAgICAgICAgICBpZiAodGVhY2hlckVtYWlsKSB0ZWFjaGVyTWFwW3RlYWNoZXJFbWFpbF0gPSB0ZWFjaGVyXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZmV0Y2hFcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHMvdGVhY2hlcnM6JywgZmV0Y2hFcnJvcilcclxuICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGluZm9cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHdlIGhhdmUgbm8gZGF0YSwgcmV0dXJuIGVtcHR5IGFycmF5XHJcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIGF0dGVuZGFuY2UgcmVjb3JkcyBmb3VuZCcpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICByZWNvcmRzOiBbXVxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMsXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvcm1hdCB0aGUgcmVzcG9uc2VcclxuICAgIGNvbnN0IGZvcm1hdHRlZFJlY29yZHMgPSAoZGF0YSB8fCBbXSkubWFwKChyZWNvcmQ6IGFueSkgPT4ge1xyXG4gICAgICAvLyBEZXRlcm1pbmUgc2NhbiB0eXBlIGZyb20gZGF0YWJhc2UgZmllbGRzXHJcbiAgICAgIGxldCBzY2FuVHlwZTogJ3RpbWVpbicgfCAndGltZW91dCcgfCBudWxsID0gbnVsbFxyXG4gICAgICBcclxuICAgICAgaWYgKHJlY29yZC50aW1lX2luICYmIHJlY29yZC5zY2FuX3RpbWUgPT09IHJlY29yZC50aW1lX2luKSB7XHJcbiAgICAgICAgc2NhblR5cGUgPSAndGltZWluJ1xyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50aW1lX291dCAmJiByZWNvcmQuc2Nhbl90aW1lID09PSByZWNvcmQudGltZV9vdXQpIHtcclxuICAgICAgICBzY2FuVHlwZSA9ICd0aW1lb3V0J1xyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC5zY2FuX3R5cGUpIHtcclxuICAgICAgICBzY2FuVHlwZSA9IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVfaW4nIHx8IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVpbicgPyAndGltZWluJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgcmVjb3JkLnNjYW5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZV9vdXQnIHx8IHJlY29yZC5zY2FuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVvdXQnID8gJ3RpbWVvdXQnIDogbnVsbFxyXG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlKSB7XHJcbiAgICAgICAgc2NhblR5cGUgPSByZWNvcmQudHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZV9pbicgfHwgcmVjb3JkLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVpbicgPyAndGltZWluJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgcmVjb3JkLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RpbWVfb3V0JyB8fCByZWNvcmQudHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGltZW91dCcgPyAndGltZW91dCcgOiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBzdHVkZW50IG9yIHRlYWNoZXIgaW5mbyBmcm9tIG1hcHNcclxuICAgICAgY29uc3Qgc3R1ZGVudCA9IHN0dWRlbnRNYXBbcmVjb3JkLnN0dWRlbnRfaWRdIHx8IG51bGxcclxuICAgICAgY29uc3QgdGVhY2hlciA9IHRlYWNoZXJNYXBbcmVjb3JkLnN0dWRlbnRfaWRdIHx8IG51bGxcclxuICAgICAgXHJcbiAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgdGVhY2hlciBvciBzdHVkZW50XHJcbiAgICAgIGNvbnN0IGlzVGVhY2hlciA9ICEhdGVhY2hlciB8fCAoc3R1ZGVudCAmJiAoXHJcbiAgICAgICAgc3R1ZGVudC5yb2xlID09PSAndGVhY2hlcicgfHwgXHJcbiAgICAgICAgc3R1ZGVudC51c2VyX3R5cGUgPT09ICd0ZWFjaGVyJyB8fFxyXG4gICAgICAgIHN0dWRlbnQudGVhY2hlcl9pZCB8fFxyXG4gICAgICAgICghc3R1ZGVudC5zdHVkZW50X2lkICYmICFzdHVkZW50LnN0dWRlbnRfbnVtYmVyKVxyXG4gICAgICApKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcGVyc29uID0gdGVhY2hlciB8fCBzdHVkZW50XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiByZWNvcmQuaWQsXHJcbiAgICAgICAgc3R1ZGVudElkOiByZWNvcmQuc3R1ZGVudF9pZCxcclxuICAgICAgICBzdHVkZW50TmFtZTogcGVyc29uXHJcbiAgICAgICAgICA/IGAke3BlcnNvbi5maXJzdF9uYW1lIHx8IHBlcnNvbi5maXJzdE5hbWUgfHwgJyd9ICR7cGVyc29uLmxhc3RfbmFtZSB8fCBwZXJzb24ubGFzdE5hbWUgfHwgJyd9YC50cmltKCkgfHwgcGVyc29uLm5hbWUgfHwgJ1Vua25vd24nXHJcbiAgICAgICAgICA6ICdVbmtub3duJyxcclxuICAgICAgICBncmFkZUxldmVsOiBpc1RlYWNoZXIgPyBudWxsIDogKHBlcnNvbj8uZ3JhZGVfbGV2ZWwgfHwgcGVyc29uPy5ncmFkZUxldmVsIHx8ICdOL0EnKSxcclxuICAgICAgICBzZWN0aW9uOiBpc1RlYWNoZXIgPyBudWxsIDogKHBlcnNvbj8uc2VjdGlvbiB8fCAnTi9BJyksXHJcbiAgICAgICAgc2NhblRpbWU6IHJlY29yZC5zY2FuX3RpbWUgfHwgcmVjb3JkLmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgc3RhdHVzOiByZWNvcmQuc3RhdHVzIHx8ICdQcmVzZW50JyxcclxuICAgICAgICByZmlkQ2FyZDogcmVjb3JkLnJmaWRfY2FyZCB8fCAnTi9BJyxcclxuICAgICAgICBzdHVkZW50UGhvdG86IHBlcnNvbj8ucGhvdG9fdXJsIHx8IHBlcnNvbj8ucHJvZmlsZV9waWN0dXJlIHx8IHBlcnNvbj8ucGljdHVyZSB8fCBudWxsLFxyXG4gICAgICAgIHNjYW5UeXBlOiBzY2FuVHlwZSxcclxuICAgICAgICB0aW1lSW46IHJlY29yZC50aW1lX2luIHx8IG51bGwsXHJcbiAgICAgICAgdGltZU91dDogcmVjb3JkLnRpbWVfb3V0IHx8IG51bGwsXHJcbiAgICAgICAgaXNUZWFjaGVyOiBpc1RlYWNoZXIgfHwgZmFsc2UsXHJcbiAgICAgICAgc3ViamVjdDogaXNUZWFjaGVyID8gKHBlcnNvbj8uc3ViamVjdCB8fCBwZXJzb24/LnN1YmplY3RzIHx8IHBlcnNvbj8uc3ViamVjdF90YXVnaHQgfHwgJ04vQScpIDogbnVsbCxcclxuICAgICAgICByb2xlOiBwZXJzb24/LnJvbGUgfHwgbnVsbCxcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICByZWNvcmRzOiBmb3JtYXR0ZWRSZWNvcmRzLFxyXG4gICAgICBjb3VudDogZm9ybWF0dGVkUmVjb3Jkcy5sZW5ndGgsXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0F0dGVuZGFuY2UgcmVjb3JkcyBBUEkgZXJyb3I6JywgZXJyb3IpXHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFjazonLCBlcnJvcj8uc3RhY2spXHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBuYW1lOicsIGVycm9yPy5uYW1lKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbWVzc2FnZTonLCBlcnJvcj8ubWVzc2FnZSlcclxuICAgIFxyXG4gICAgLy8gQWx3YXlzIHJldHVybiBKU09OLCBuZXZlciBsZXQgTmV4dC5qcyByZXR1cm4gSFRNTCBlcnJvciBwYWdlXHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgLy8gUmV0dXJuIHN1Y2Nlc3Mgd2l0aCBlbXB0eSByZWNvcmRzIHRvIHByZXZlbnQgZnJvbnRlbmQgY3Jhc2hcclxuICAgICAgICAgIHJlY29yZHM6IFtdLFxyXG4gICAgICAgICAgd2FybmluZzogJ1VuYWJsZSB0byBmZXRjaCBhdHRlbmRhbmNlIHJlY29yZHMnLFxyXG4gICAgICAgICAgZXJyb3I6IGVycm9yPy5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB7XHJcbiAgICAgICAgICAgIHN0YWNrOiBlcnJvcj8uc3RhY2ssXHJcbiAgICAgICAgICAgIG5hbWU6IGVycm9yPy5uYW1lLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvcj8ubWVzc2FnZSxcclxuICAgICAgICAgIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3RhdHVzOiAyMDAsIC8vIFJldHVybiAyMDAgdG8gcHJldmVudCBmcm9udGVuZCBmcm9tIHRyZWF0aW5nIGl0IGFzIGFuIGVycm9yXHJcbiAgICAgICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyxcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgIH0gY2F0Y2ggKGpzb25FcnJvcjogYW55KSB7XHJcbiAgICAgIC8vIEV2ZW4gaWYgSlNPTiBjcmVhdGlvbiBmYWlscywgcmV0dXJuIGEgc2ltcGxlIHRleHQgcmVzcG9uc2UgYXMgSlNPTlxyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIEpTT04gcmVzcG9uc2U6JywganNvbkVycm9yKVxyXG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgcmVjb3JkczogW10sXHJcbiAgICAgICAgICB3YXJuaW5nOiAnU2VydmljZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZScsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyxcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICAvLyBEZWJ1ZzogTG9nIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG4gIGNvbnNvbGUubG9nKFwiPT09IFBPU1Q6IEVOVklST05NRU5UIFZBUklBQkxFUyBERUJVRyA9PT1cIilcclxuICBjb25zb2xlLmxvZyhcIlVSTDpcIiwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMID8gXCJTRVRcIiA6IFwiTUlTU0lOR1wiKVxyXG4gIGNvbnNvbGUubG9nKFwiVVJMIFZhbHVlOlwiLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwpXHJcbiAgY29uc29sZS5sb2coXCJBTk9OOlwiLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSA/IFwiU0VUXCIgOiBcIk1JU1NJTkdcIilcclxuICBjb25zb2xlLmxvZyhcIkFOT04gS2V5IChmaXJzdCAyMCBjaGFycyk6XCIsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZPy5zdWJzdHJpbmcoMCwgMjApIHx8IFwiTUlTU0lOR1wiKVxyXG4gIGNvbnNvbGUubG9nKFwiU0VSVklDRTpcIiwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSA/IFwiU0VUXCIgOiBcIk1JU1NJTkdcIilcclxuICBjb25zb2xlLmxvZyhcIlNFUlZJQ0UgS2V5IChmaXJzdCAyMCBjaGFycyk6XCIsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk/LnN1YnN0cmluZygwLCAyMCkgfHwgXCJNSVNTSU5HXCIpXHJcbiAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIilcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEhhbmRsZSBDT1JTIHByZWZsaWdodFxyXG4gICAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc2NhbkRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgIGlmICghc2NhbkRhdGEuc3R1ZGVudElkICYmICFzY2FuRGF0YS5yZmlkQ2FyZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTdHVkZW50IElEIG9yIFJGSUQgQ2FyZCBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3RhdHVzOiA0MDAsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSBhZG1pbiBjbGllbnQgZm9yIGluc2VydHMgdG8gYnlwYXNzIFJMUyBwb2xpY2llc1xyXG4gICAgLy8gVGhpcyBhdm9pZHMgVVVJRC9URVhUIGNvbXBhcmlzb24gZXJyb3JzIGluIFJMUyBwb2xpY2llc1xyXG4gICAgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBnZXRTdXBhYmFzZUFkbWluKClcclxuICAgIFxyXG4gICAgaWYgKCFzdXBhYmFzZUNsaWVudCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJylcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnU2NhbiByZWNvcmRlZCAoZGV2IG1vZGUgLSBub3Qgc2F2ZWQgdG8gZGF0YWJhc2UpJyxcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgZXJyb3I6ICdEYXRhYmFzZSBzZXJ2aWNlIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY2hlY2sgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgZGF0ZSAoc3RhcnQgb2YgZGF5KSBmb3IgY2hlY2tpbmcgZXhpc3RpbmcgcmVjb3Jkc1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXHJcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxyXG4gICAgY29uc3QgdG9kYXlTdGFydCA9IHRvZGF5LnRvSVNPU3RyaW5nKClcclxuICAgIGNvbnN0IHRvZGF5RW5kID0gbmV3IERhdGUodG9kYXkpXHJcbiAgICB0b2RheUVuZC5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpXHJcbiAgICBjb25zdCB0b2RheUVuZElTTyA9IHRvZGF5RW5kLnRvSVNPU3RyaW5nKClcclxuXHJcbiAgICAvLyBGaW5kIHN0dWRlbnQgYnkgUkZJRCBjYXJkIG9yIHN0dWRlbnQgSURcclxuICAgIGxldCBzdHVkZW50SWQgPSBzY2FuRGF0YS5zdHVkZW50SWRcclxuICAgIGlmICghc3R1ZGVudElkICYmIHNjYW5EYXRhLnJmaWRDYXJkKSB7XHJcbiAgICAgIC8vIE5vcm1hbGl6ZSBSRklEIGNhcmQgLSByZW1vdmUgc3BhY2VzLCBjb252ZXJ0IHRvIHVwcGVyY2FzZSwgcmVtb3ZlIGxlYWRpbmcgemVyb3NcclxuICAgICAgbGV0IHJmaWROb3JtYWxpemVkID0gc2NhbkRhdGEucmZpZENhcmQudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICcnKVxyXG4gICAgICAvLyBBbHNvIGNyZWF0ZSB2ZXJzaW9uIHdpdGhvdXQgbGVhZGluZyB6ZXJvcyBmb3IgbWF0Y2hpbmdcclxuICAgICAgY29uc3QgcmZpZE5vTGVhZGluZ1plcm9zID0gcmZpZE5vcm1hbGl6ZWQucmVwbGFjZSgvXjArLywgJycpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgU2VhcmNoaW5nIGZvciBzdHVkZW50IHdpdGggUkZJRDogJHtyZmlkTm9ybWFsaXplZH0gKGFsc28gdHJ5aW5nOiAke3JmaWROb0xlYWRpbmdaZXJvc30pYClcclxuICAgICAgXHJcbiAgICAgIC8vIEZldGNoIGFsbCBzdHVkZW50cyBhbmQgZmlsdGVyIGluIG1lbW9yeSB0byBhdm9pZCBjb2x1bW4gZXJyb3JzXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogYWxsU3R1ZGVudHMsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgIC5mcm9tKCdzdHVkZW50cycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmxpbWl0KDEwMDApXHJcblxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN0dWRlbnRzOicsIGZldGNoRXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogYERhdGFiYXNlIGVycm9yOiAke2ZldGNoRXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICBzZWFyY2hlZFJmaWQ6IHJmaWROb3JtYWxpemVkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgc3RhdHVzOiA1MDAsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEZpbHRlciBzdHVkZW50cyBpbiBtZW1vcnkgYnkgUkZJRCAoY2hlY2sgYWxsIHBvc3NpYmxlIGNvbHVtbiBuYW1lcylcclxuICAgICAgLy8gUHJpb3JpdHk6IHJmaWRfY2FyZCAod2hhdCBFU1AzMiBleHBlY3RzKSA+IHJmaWRDYXJkID4gcmZpZF90YWcgPiByZmlkVGFnXHJcbiAgICAgIGNvbnN0IHN0dWRlbnRzID0gKGFsbFN0dWRlbnRzIHx8IFtdKS5maWx0ZXIoKHN0dWRlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJmaWQxID0gKHN0dWRlbnQucmZpZF9jYXJkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKS50b1VwcGVyQ2FzZSgpICAvLyBQcmltYXJ5IC0gRVNQMzIgZXhwZWN0cyB0aGlzXHJcbiAgICAgICAgY29uc3QgcmZpZDIgPSAoc3R1ZGVudC5yZmlkQ2FyZCB8fCAnJykudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2UoKVxyXG4gICAgICAgIGNvbnN0IHJmaWQzID0gKHN0dWRlbnQucmZpZF90YWcgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpLnRvVXBwZXJDYXNlKClcclxuICAgICAgICBjb25zdCByZmlkNCA9IChzdHVkZW50LnJmaWRUYWcgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpLnRvVXBwZXJDYXNlKClcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBleGFjdCBtYXRjaGVzIGZpcnN0LCB0aGVuIHBhcnRpYWxcclxuICAgICAgICByZXR1cm4gcmZpZDEgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQxID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgcmZpZDIgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQyID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgcmZpZDMgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQzID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgcmZpZDQgPT09IHJmaWROb3JtYWxpemVkIHx8IHJmaWQ0ID09PSByZmlkTm9MZWFkaW5nWmVyb3MgfHxcclxuICAgICAgICAgICAgICAgcmZpZDEuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpIHx8IHJmaWQyLmluY2x1ZGVzKHJmaWROb3JtYWxpemVkKSB8fFxyXG4gICAgICAgICAgICAgICByZmlkMy5pbmNsdWRlcyhyZmlkTm9ybWFsaXplZCkgfHwgcmZpZDQuaW5jbHVkZXMocmZpZE5vcm1hbGl6ZWQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoIXN0dWRlbnRzIHx8IHN0dWRlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBObyBzdHVkZW50IGZvdW5kIHdpdGggUkZJRDogJHtyZmlkTm9ybWFsaXplZH1gKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgZXJyb3I6IGBTdHVkZW50IG5vdCBmb3VuZCBmb3IgUkZJRDogJHtyZmlkTm9ybWFsaXplZH0uIFBsZWFzZSBhc3NpZ24gdGhpcyBSRklEIGNhcmQgdG8gYSBzdHVkZW50IGluIHRoZSBhZG1pbiBwYW5lbC5gLFxyXG4gICAgICAgICAgICBzZWFyY2hlZFJmaWQ6IHJmaWROb3JtYWxpemVkLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBgUkZJRCAke3JmaWROb3JtYWxpemVkfSBub3QgYXNzaWduZWQgdG8gYW55IHN0dWRlbnRgXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgc3RhdHVzOiA0MDQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSBmaXJzdCBtYXRjaFxyXG4gICAgICBjb25zdCBtYXRjaGVkU3R1ZGVudCA9IHN0dWRlbnRzWzBdXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgc3R1ZGVudDogJHttYXRjaGVkU3R1ZGVudC5maXJzdF9uYW1lIHx8IG1hdGNoZWRTdHVkZW50LmZpcnN0TmFtZSB8fCAnVW5rbm93bid9ICR7bWF0Y2hlZFN0dWRlbnQubGFzdF9uYW1lIHx8IG1hdGNoZWRTdHVkZW50Lmxhc3ROYW1lIHx8ICcnfWApXHJcbiAgICAgIFxyXG4gICAgICAvLyBVc2Ugc3R1ZGVudF9udW1iZXIgb3Igc3R1ZGVudF9pZCAoVEVYVCkgLSBOT1QgdGhlIFVVSUQgaWRcclxuICAgICAgLy8gYXR0ZW5kYW5jZV9yZWNvcmRzLnN0dWRlbnRfaWQgaXMgVEVYVCB0eXBlLCBzbyB3ZSBzdG9yZSBURVhUIHZhbHVlc1xyXG4gICAgICBzdHVkZW50SWQgPSBtYXRjaGVkU3R1ZGVudC5zdHVkZW50X251bWJlciB8fCBtYXRjaGVkU3R1ZGVudC5zdHVkZW50X2lkIHx8IG1hdGNoZWRTdHVkZW50LnN0dWRlbnRJZCB8fCBtYXRjaGVkU3R1ZGVudC5pZD8udG9TdHJpbmcoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHN0dWRlbnQgaGFzIGFscmVhZHkgc2Nhbm5lZCBpbiB0b2RheVxyXG4gICAgLy8gc3R1ZGVudF9pZCBpcyBub3cgVEVYVCB0eXBlLCBzbyB3ZSBjYW4gcXVlcnkgZGlyZWN0bHlcclxuICAgIC8vIEJ1dCB3ZSBuZWVkIHRvIGNhc3QgdG8gdGV4dCB0byBhdm9pZCBVVUlEIGNvbXBhcmlzb24gZXJyb3JzXHJcbiAgICBsZXQgdG9kYXlSZWNvcmRzOiBhbnlbXSA9IFtdXHJcbiAgICBsZXQgY2hlY2tFcnJvcjogYW55ID0gbnVsbFxyXG4gICAgXHJcbiAgICAvLyBGZXRjaCBhbGwgcmVjb3JkcyBmb3IgdG9kYXksIHRoZW4gZmlsdGVyIGluIG1lbW9yeSB0byBhdm9pZCB0eXBlIG1pc21hdGNoXHJcbiAgICBjb25zdCB7IGRhdGE6IGFsbFRvZGF5UmVjb3JkcywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50XHJcbiAgICAgIC5mcm9tKCdhdHRlbmRhbmNlX3JlY29yZHMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgc2Nhbl90eXBlLCBzY2FuX3RpbWUsIHRpbWVfaW4sIHRpbWVfb3V0LCBzdHVkZW50X2lkJylcclxuICAgICAgLmd0ZSgnc2Nhbl90aW1lJywgdG9kYXlTdGFydClcclxuICAgICAgLmx0ZSgnc2Nhbl90aW1lJywgdG9kYXlFbmRJU08pXHJcbiAgICAgIC5vcmRlcignc2Nhbl90aW1lJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcclxuICAgIFxyXG4gICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgY2hlY2tFcnJvciA9IGZldGNoRXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdG9kYXkgcmVjb3JkczonLCBmZXRjaEVycm9yKVxyXG4gICAgfSBlbHNlIGlmIChhbGxUb2RheVJlY29yZHMpIHtcclxuICAgICAgLy8gRmlsdGVyIGluIG1lbW9yeSBieSBzdHVkZW50X2lkICh0ZXh0IG1hdGNoKSB0byBhdm9pZCBVVUlEL1RFWFQgY29tcGFyaXNvbiBpc3N1ZXNcclxuICAgICAgdG9kYXlSZWNvcmRzID0gYWxsVG9kYXlSZWNvcmRzLmZpbHRlcigocjogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcklkID0gKHIuc3R1ZGVudF9pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICBjb25zdCBzSWQgPSAoc3R1ZGVudElkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgIHJldHVybiBySWQgPT09IHNJZCB8fCBySWQgPT09IHN0dWRlbnRJZCB8fCBzSWQgPT09IHIuc3R1ZGVudF9pZFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjaGVja0Vycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGV4aXN0aW5nIHJlY29yZHM6JywgY2hlY2tFcnJvcilcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgc2NhbiB0eXBlXHJcbiAgICBsZXQgc2NhblR5cGU6ICd0aW1laW4nIHwgJ3RpbWVvdXQnID0gJ3RpbWVpbidcclxuICAgIGxldCB0aW1lSW4gPSBudWxsXHJcbiAgICBsZXQgdGltZU91dCA9IG51bGxcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcblxyXG4gICAgaWYgKHRvZGF5UmVjb3JkcyAmJiB0b2RheVJlY29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSB0aW1lIGluIGZvciB0b2RheVxyXG4gICAgICBjb25zdCBoYXNUaW1lSW4gPSB0b2RheVJlY29yZHMuc29tZSgocjogYW55KSA9PiBcclxuICAgICAgICByLnNjYW5fdHlwZSA9PT0gJ3RpbWVpbicgfHwgci5zY2FuX3R5cGUgPT09ICd0aW1lX2luJyB8fCBcclxuICAgICAgICAoci50aW1lX2luICYmIHIuc2Nhbl90aW1lID09PSByLnRpbWVfaW4pXHJcbiAgICAgIClcclxuICAgICAgXHJcbiAgICAgIGlmIChoYXNUaW1lSW4pIHtcclxuICAgICAgICAvLyBUaGlzIGlzIGEgdGltZSBvdXRcclxuICAgICAgICBzY2FuVHlwZSA9ICd0aW1lb3V0J1xyXG4gICAgICAgIHRpbWVPdXQgPSBjdXJyZW50VGltZVxyXG4gICAgICAgIC8vIEZpbmQgdGhlIHRpbWUgaW4gcmVjb3JkXHJcbiAgICAgICAgY29uc3QgdGltZUluUmVjb3JkID0gdG9kYXlSZWNvcmRzLmZpbmQoKHI6IGFueSkgPT4gXHJcbiAgICAgICAgICByLnNjYW5fdHlwZSA9PT0gJ3RpbWVpbicgfHwgci5zY2FuX3R5cGUgPT09ICd0aW1lX2luJyB8fCBcclxuICAgICAgICAgIChyLnRpbWVfaW4gJiYgci5zY2FuX3RpbWUgPT09IHIudGltZV9pbilcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKHRpbWVJblJlY29yZCkge1xyXG4gICAgICAgICAgdGltZUluID0gdGltZUluUmVjb3JkLnRpbWVfaW4gfHwgdGltZUluUmVjb3JkLnNjYW5fdGltZVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBUaGlzIGlzIGEgdGltZSBpblxyXG4gICAgICAgIHNjYW5UeXBlID0gJ3RpbWVpbidcclxuICAgICAgICB0aW1lSW4gPSBjdXJyZW50VGltZVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBObyByZWNvcmRzIHRvZGF5LCB0aGlzIGlzIGEgdGltZSBpblxyXG4gICAgICBzY2FuVHlwZSA9ICd0aW1laW4nXHJcbiAgICAgIHRpbWVJbiA9IGN1cnJlbnRUaW1lXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zZXJ0IHRoZSBhdHRlbmRhbmNlIHJlY29yZFxyXG4gICAgLy8gQnVpbGQgaW5zZXJ0IG9iamVjdCB3aXRoIGFsbCByZXF1aXJlZCBmaWVsZHNcclxuICAgIGNvbnN0IGF0dGVuZGFuY2VSZWNvcmQ6IGFueSA9IHtcclxuICAgICAgc3R1ZGVudF9pZDogc3R1ZGVudElkLFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgUkZJRCBmaWVsZHMgLSBzZXQgYm90aCByZmlkX2NhcmQgYW5kIHJmaWRfdGFnIHRvIGF2b2lkIE5PVCBOVUxMIGNvbnN0cmFpbnQgZXJyb3JzXHJcbiAgICBjb25zdCByZmlkVmFsdWUgPSBzY2FuRGF0YS5yZmlkQ2FyZCB8fCAnJ1xyXG4gICAgaWYgKHJmaWRWYWx1ZSkge1xyXG4gICAgICBhdHRlbmRhbmNlUmVjb3JkLnJmaWRfY2FyZCA9IHJmaWRWYWx1ZVxyXG4gICAgICBhdHRlbmRhbmNlUmVjb3JkLnJmaWRfdGFnID0gcmZpZFZhbHVlICAvLyBTb21lIHNjaGVtYXMgdXNlIHJmaWRfdGFnIGluc3RlYWRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIG5vIFJGSUQgcHJvdmlkZWQsIHNldCBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgTk9UIE5VTEwgY29uc3RyYWludFxyXG4gICAgICBhdHRlbmRhbmNlUmVjb3JkLnJmaWRfY2FyZCA9ICcnXHJcbiAgICAgIGF0dGVuZGFuY2VSZWNvcmQucmZpZF90YWcgPSAnJ1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTZXQgZGV2aWNlX2lkIC0gaWYgY29sdW1uIGlzIFVVSUQgdHlwZSwgd2UgY2FuJ3QgdXNlIHRleHQsIHNvIHNldCB0byBudWxsXHJcbiAgICAvLyBJZiBjb2x1bW4gaXMgVEVYVCB0eXBlLCB3ZSBjYW4gdXNlIGEgZGV2aWNlIGlkZW50aWZpZXJcclxuICAgIC8vIEZvciBub3csIGRvbid0IHNldCBpdCB0byBhdm9pZCBVVUlEIHR5cGUgZXJyb3JzXHJcbiAgICAvLyBhdHRlbmRhbmNlUmVjb3JkLmRldmljZV9pZCA9IHNjYW5EYXRhLmRldmljZUlkIHx8IG51bGxcclxuICAgIFxyXG4gICAgYXR0ZW5kYW5jZVJlY29yZC5zY2FuX3RpbWUgPSBjdXJyZW50VGltZVxyXG4gICAgYXR0ZW5kYW5jZVJlY29yZC5zY2FuX3R5cGUgPSBzY2FuVHlwZVxyXG4gICAgYXR0ZW5kYW5jZVJlY29yZC50aW1lX2luID0gdGltZUluXHJcbiAgICBhdHRlbmRhbmNlUmVjb3JkLnRpbWVfb3V0ID0gdGltZU91dFxyXG4gICAgYXR0ZW5kYW5jZVJlY29yZC5zdGF0dXMgPSBzY2FuVHlwZSA9PT0gJ3RpbWVpbicgPyAnUHJlc2VudCcgOiAnUHJlc2VudCdcclxuICAgIGF0dGVuZGFuY2VSZWNvcmQuY3JlYXRlZF9hdCA9IGN1cnJlbnRUaW1lXHJcbiAgICBcclxuICAgIC8vIE9wdGlvbmFsIHR5cGUgZmllbGQgZm9yIGNvbXBhdGliaWxpdHlcclxuICAgIGF0dGVuZGFuY2VSZWNvcmQudHlwZSA9IHNjYW5UeXBlXHJcbiAgICBcclxuICAgIC8vIEluc2VydCB0aGUgYXR0ZW5kYW5jZSByZWNvcmQgKHdpdGhvdXQgam9pbiB0byBhdm9pZCBmb3JlaWduIGtleSBpc3N1ZXMpXHJcbiAgICBjb25zdCB7IGRhdGE6IG5ld1JlY29yZCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAuZnJvbSgnYXR0ZW5kYW5jZV9yZWNvcmRzJylcclxuICAgICAgLmluc2VydChbYXR0ZW5kYW5jZVJlY29yZF0pXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgaW5zZXJ0RXJyb3IpXHJcbiAgICAgIFxyXG4gICAgICAvLyBJbiBkZXZlbG9wbWVudCwgcmV0dXJuIHN1Y2Nlc3MgZXZlbiBpZiB0YWJsZSBkb2Vzbid0IGV4aXN0XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTY2FuIGRhdGEgKGRldiBtb2RlKTonLCB7IHN0dWRlbnRJZCwgc2NhblR5cGUsIHRpbWVJbiwgdGltZU91dCB9KVxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1NjYW4gcmVjb3JkZWQgKGRldiBtb2RlIC0gbm90IHNhdmVkIHRvIGRhdGFiYXNlKScsXHJcbiAgICAgICAgICBzY2FuVHlwZSxcclxuICAgICAgICAgIHRpbWVJbixcclxuICAgICAgICAgIHRpbWVPdXQsXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgIGVycm9yOiBpbnNlcnRFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgaGludDogJ1BsZWFzZSBjaGVjayB0aGF0IGFsbCByZXF1aXJlZCBjb2x1bW5zIGV4aXN0IGluIGF0dGVuZGFuY2VfcmVjb3JkcyB0YWJsZS4gUnVuIGNyZWF0ZS1hdHRlbmRhbmNlLXRhYmxlLnNxbCBpbiBTdXBhYmFzZS4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3RhdHVzOiA1MDAsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIHN0dWRlbnQgaW5mb3JtYXRpb24gc2VwYXJhdGVseSB0byBhdm9pZCBqb2luIGlzc3Vlc1xyXG4gICAgLy8gRmV0Y2ggYWxsIHN0dWRlbnRzIGFuZCBmaWx0ZXIgaW4gbWVtb3J5IHRvIGF2b2lkIFVVSUQvVEVYVCBjb21wYXJpc29uIGVycm9yc1xyXG4gICAgbGV0IHN0dWRlbnRJbmZvOiBhbnkgPSBudWxsXHJcbiAgICBpZiAoc3R1ZGVudElkKSB7XHJcbiAgICAgIC8vIEZldGNoIGFsbCBzdHVkZW50cyBhbmQgZmlsdGVyIGluIG1lbW9yeVxyXG4gICAgICBjb25zdCB7IGRhdGE6IGFsbFN0dWRlbnRzIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudFxyXG4gICAgICAgIC5mcm9tKCdzdHVkZW50cycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmxpbWl0KDEwMDApXHJcbiAgICAgIFxyXG4gICAgICBpZiAoYWxsU3R1ZGVudHMpIHtcclxuICAgICAgICAvLyBGaW5kIG1hdGNoaW5nIHN0dWRlbnQgYnkgY29tcGFyaW5nIGFzIHN0cmluZ3NcclxuICAgICAgICBjb25zdCBzdHVkZW50SWRTdHIgPSAoc3R1ZGVudElkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgIHN0dWRlbnRJbmZvID0gYWxsU3R1ZGVudHMuZmluZCgoc3R1ZGVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzSWQgPSAoc3R1ZGVudC5zdHVkZW50X2lkIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgY29uc3Qgc051bSA9IChzdHVkZW50LnN0dWRlbnRfbnVtYmVyIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gICAgICAgICAgY29uc3Qgc1V1aWQgPSAoc3R1ZGVudC5pZCB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICAgICAgICAgIHJldHVybiBzSWQgPT09IHN0dWRlbnRJZFN0ciB8fCBzTnVtID09PSBzdHVkZW50SWRTdHIgfHwgc1V1aWQgPT09IHN0dWRlbnRJZFN0clxyXG4gICAgICAgIH0pIHx8IG51bGxcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcm1hdCB0aGUgcmVzcG9uc2VcclxuICAgIGNvbnN0IGZvcm1hdHRlZFJlY29yZCA9IHtcclxuICAgICAgaWQ6IG5ld1JlY29yZC5pZCxcclxuICAgICAgc3R1ZGVudElkOiBuZXdSZWNvcmQuc3R1ZGVudF9pZCB8fCBzdHVkZW50SWQsXHJcbiAgICAgIHN0dWRlbnROYW1lOiBzdHVkZW50SW5mb1xyXG4gICAgICAgID8gYCR7c3R1ZGVudEluZm8uZmlyc3RfbmFtZSB8fCBzdHVkZW50SW5mby5maXJzdE5hbWUgfHwgJyd9ICR7c3R1ZGVudEluZm8ubGFzdF9uYW1lIHx8IHN0dWRlbnRJbmZvLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8IHN0dWRlbnRJbmZvLm5hbWUgfHwgJ1Vua25vd24gU3R1ZGVudCdcclxuICAgICAgICA6ICdVbmtub3duIFN0dWRlbnQnLFxyXG4gICAgICBncmFkZUxldmVsOiBzdHVkZW50SW5mbz8uZ3JhZGVfbGV2ZWwgfHwgc3R1ZGVudEluZm8/LmdyYWRlTGV2ZWwgfHwgJ04vQScsXHJcbiAgICAgIHNlY3Rpb246IHN0dWRlbnRJbmZvPy5zZWN0aW9uIHx8ICdOL0EnLFxyXG4gICAgICBzY2FuVGltZTogbmV3UmVjb3JkLnNjYW5fdGltZSB8fCBuZXdSZWNvcmQuY3JlYXRlZF9hdCxcclxuICAgICAgc3RhdHVzOiBuZXdSZWNvcmQuc3RhdHVzIHx8ICdQcmVzZW50JyxcclxuICAgICAgcmZpZENhcmQ6IG5ld1JlY29yZC5yZmlkX2NhcmQgfHwgc2NhbkRhdGEucmZpZENhcmQgfHwgJ04vQScsXHJcbiAgICAgIHN0dWRlbnRQaG90bzogc3R1ZGVudEluZm8/LnBob3RvX3VybCB8fCBzdHVkZW50SW5mbz8ucHJvZmlsZV9waWN0dXJlIHx8IHN0dWRlbnRJbmZvPy5waWN0dXJlIHx8IG51bGwsXHJcbiAgICAgIHNjYW5UeXBlOiBzY2FuVHlwZSxcclxuICAgICAgdGltZUluOiBuZXdSZWNvcmQudGltZV9pbiB8fCBudWxsLFxyXG4gICAgICB0aW1lT3V0OiBuZXdSZWNvcmQudGltZV9vdXQgfHwgbnVsbCxcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICByZWNvcmQ6IGZvcm1hdHRlZFJlY29yZCxcclxuICAgICAgbWVzc2FnZTogYFRpbWUgJHtzY2FuVHlwZSA9PT0gJ3RpbWVpbicgPyAnSW4nIDogJ091dCd9IHJlY29yZGVkIHN1Y2Nlc3NmdWxseWAsXHJcbiAgICB9LCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVjb3JkIGF0dGVuZGFuY2UgQVBJIGVycm9yOicsIGVycm9yKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhY2s6JywgZXJyb3I/LnN0YWNrKVxyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpXHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yPy5zdGFjayA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBcclxuICAgICAgICBzdGF0dXM6IDUwMCxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcclxuICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFN1cGFiYXNlQWRtaW4iLCJPUFRJT05TIiwicmVxdWVzdCIsInN0YXR1cyIsImhlYWRlcnMiLCJHRVQiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3Vic3RyaW5nIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImRlZmF1bHRIZWFkZXJzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwibGltaXQiLCJwYXJzZUludCIsImdldCIsInNpbmNlIiwic3VwYWJhc2VDbGllbnQiLCJjbGllbnRFcnJvciIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJyZWNvcmRzIiwid2FybmluZyIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJkYXRhIiwicXVlcnlTdWNjZXNzIiwicnBjRGF0YSIsInJwY0Vycm9yIiwicnBjIiwicmVjb3JkX2xpbWl0Iiwic2luY2VfdGltZSIsImxlbmd0aCIsInJwY0V4Y2VwdGlvbiIsImRpcmVjdFF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ3QiLCJkaXJlY3RSZXN1bHQiLCJjb2RlIiwiaW5jbHVkZXMiLCJkaXJlY3RFcnJvciIsInF1ZXJ5RXJyb3IiLCJuYW1lIiwic3RhY2siLCJkZXRhaWxzIiwiaGludCIsInN0dWRlbnRJZHMiLCJTZXQiLCJtYXAiLCJyIiwic3R1ZGVudF9pZCIsImZpbHRlciIsIkJvb2xlYW4iLCJzdHVkZW50TWFwIiwidGVhY2hlck1hcCIsImFsbFN0dWRlbnRzIiwic3R1ZGVudHNFcnJvciIsImZvckVhY2giLCJzdHVkZW50Iiwic3R1ZGVudElkU3RyIiwidG9TdHJpbmciLCJ0cmltIiwic3R1ZGVudE51bWJlclN0ciIsInN0dWRlbnRfbnVtYmVyIiwic3R1ZGVudElkVXVpZCIsImlkIiwiYWxsVGVhY2hlcnMiLCJ0ZWFjaGVyc0Vycm9yIiwidGVhY2hlciIsInRlYWNoZXJJZFN0ciIsInRlYWNoZXJfaWQiLCJ0ZWFjaGVyRW1haWwiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwiZmV0Y2hFcnJvciIsImZvcm1hdHRlZFJlY29yZHMiLCJyZWNvcmQiLCJzY2FuVHlwZSIsInRpbWVfaW4iLCJzY2FuX3RpbWUiLCJ0aW1lX291dCIsInNjYW5fdHlwZSIsInR5cGUiLCJpc1RlYWNoZXIiLCJyb2xlIiwidXNlcl90eXBlIiwicGVyc29uIiwic3R1ZGVudElkIiwic3R1ZGVudE5hbWUiLCJmaXJzdF9uYW1lIiwiZmlyc3ROYW1lIiwibGFzdF9uYW1lIiwibGFzdE5hbWUiLCJncmFkZUxldmVsIiwiZ3JhZGVfbGV2ZWwiLCJzZWN0aW9uIiwic2NhblRpbWUiLCJjcmVhdGVkX2F0IiwicmZpZENhcmQiLCJyZmlkX2NhcmQiLCJzdHVkZW50UGhvdG8iLCJwaG90b191cmwiLCJwcm9maWxlX3BpY3R1cmUiLCJwaWN0dXJlIiwidGltZUluIiwidGltZU91dCIsInN1YmplY3QiLCJzdWJqZWN0cyIsInN1YmplY3RfdGF1Z2h0IiwiY291bnQiLCJqc29uRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiUE9TVCIsInNjYW5EYXRhIiwidG9kYXkiLCJEYXRlIiwic2V0SG91cnMiLCJ0b2RheVN0YXJ0IiwidG9JU09TdHJpbmciLCJ0b2RheUVuZCIsInRvZGF5RW5kSVNPIiwicmZpZE5vcm1hbGl6ZWQiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJyZmlkTm9MZWFkaW5nWmVyb3MiLCJzZWFyY2hlZFJmaWQiLCJzdHVkZW50cyIsInJmaWQxIiwicmZpZDIiLCJyZmlkMyIsInJmaWRfdGFnIiwicmZpZDQiLCJyZmlkVGFnIiwibWF0Y2hlZFN0dWRlbnQiLCJ0b2RheVJlY29yZHMiLCJjaGVja0Vycm9yIiwiYWxsVG9kYXlSZWNvcmRzIiwiZ3RlIiwibHRlIiwicklkIiwic0lkIiwiY3VycmVudFRpbWUiLCJoYXNUaW1lSW4iLCJzb21lIiwidGltZUluUmVjb3JkIiwiZmluZCIsImF0dGVuZGFuY2VSZWNvcmQiLCJyZmlkVmFsdWUiLCJuZXdSZWNvcmQiLCJpbnNlcnRFcnJvciIsImluc2VydCIsInNpbmdsZSIsInN0dWRlbnRJbmZvIiwic051bSIsInNVdWlkIiwiZm9ybWF0dGVkUmVjb3JkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/attendance-live/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseAdmin.ts":
/*!******************************!*\
  !*** ./lib/supabaseAdmin.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseAdmin: () => (/* binding */ getSupabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/.pnpm/@supabase+supabase-js@2.78.0/node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://ulntyefamkxkbynrugop.supabase.co\";\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nfunction getSupabaseAdmin() {\n    if (!supabaseUrl || !serviceRoleKey) {\n        throw new Error('Missing Supabase admin env. Set NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY (server-only).');\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VBZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RTtBQUV6RSxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsaUJBQWlCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUVyRCxTQUFTQztJQUNkLElBQUksQ0FBQ04sZUFBZSxDQUFDSSxnQkFBZ0I7UUFDbkMsTUFBTSxJQUFJRyxNQUFNO0lBQ2xCO0lBRUEsT0FBT1IsbUVBQVlBLENBQUNDLGFBQXVCSSxnQkFBMEI7UUFDbkVJLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxceGFtcHBcXGh0ZG9jc1xcY2Fwc3RvbmVfTWFpblxcbGliXFxzdXBhYmFzZUFkbWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCwgdHlwZSBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXHJcbmNvbnN0IHNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQWRtaW4oKTogU3VwYWJhc2VDbGllbnQge1xyXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXNlcnZpY2VSb2xlS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgYWRtaW4gZW52LiBTZXQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFuZCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIChzZXJ2ZXItb25seSkuJylcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCBhcyBzdHJpbmcsIHNlcnZpY2VSb2xlS2V5IGFzIHN0cmluZywge1xyXG4gICAgYXV0aDoge1xyXG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG59XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImdldFN1cGFiYXNlQWRtaW4iLCJFcnJvciIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_xampp_htdocs_capstone_Main_app_api_admin_attendance_live_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/attendance-live/route.ts */ \"(rsc)/./app/api/admin/attendance-live/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/attendance-live/route\",\n        pathname: \"/api/admin/attendance-live\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/attendance-live/route\"\n    },\n    resolvedPagePath: \"C:\\\\xampp\\\\htdocs\\\\capstone_Main\\\\app\\\\api\\\\admin\\\\attendance-live\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_xampp_htdocs_capstone_Main_app_api_admin_attendance_live_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmF0dGVuZGFuY2UtbGl2ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZhdHRlbmRhbmNlLWxpdmUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRmF0dGVuZGFuY2UtbGl2ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNjYXBzdG9uZV9NYWluJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNjYXBzdG9uZV9NYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxceGFtcHBcXFxcaHRkb2NzXFxcXGNhcHN0b25lX01haW5cXFxcYXBwXFxcXGFwaVxcXFxhZG1pblxcXFxhdHRlbmRhbmNlLWxpdmVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2F0dGVuZGFuY2UtbGl2ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vYXR0ZW5kYW5jZS1saXZlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxceGFtcHBcXFxcaHRkb2NzXFxcXGNhcHN0b25lX01haW5cXFxcYXBwXFxcXGFwaVxcXFxhZG1pblxcXFxhdHRlbmRhbmNlLWxpdmVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/tslib@2.8.1","vendor-chunks/@supabase+storage-js@2.78.0","vendor-chunks/@supabase+auth-js@2.78.0","vendor-chunks/@supabase+realtime-js@2.78.0","vendor-chunks/@supabase+postgrest-js@2.78.0","vendor-chunks/@supabase+supabase-js@2.78.0","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/@supabase+functions-js@2.78.0","vendor-chunks/tr46@0.0.3","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/@supabase+node-fetch@2.6.15"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fattendance-live%2Froute&page=%2Fapi%2Fadmin%2Fattendance-live%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fattendance-live%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Ccapstone_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();